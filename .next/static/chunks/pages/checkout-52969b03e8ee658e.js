(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3732],{2364:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var l=n(42107),i=n(70190),a=n(1992),r=n(65904);let o=async e=>{if(e){let{data:t}=await l.A.get("".concat(i.Id,"/").concat(e));return t}};function s(e){return(0,a.useQuery)("store-details_s",()=>o(e),{enabled:!1,onError:r.P1})}},4929:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return n(55646)}])},55646:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>nD});var l=n(37876),i=n(68050),a=n(72370),r=n(89099),o=n.n(r),s=n(14232),d=n(74695),c=n(6995),u=n(64410),p=n(49794),x=n(82),m=n(60746),h=n(74202),g=n(97470),j=n(82179),v=n(99691),f=n(34328);let y={src:"/_next/static/media/takeaway.aaf39021.png"},_={src:"/_next/static/media/schedule.05305b51.png"};var A=n(37235),w=n(35656),C=n(82260),b=n(19957),S=n(21398),I=n(13927),k=n(66120),P=n(6003),W=n(68284),z=n(88713),D=n(59719),T=n(32162);let B=e=>{var t;let{storeData:n,handleChange:i,today:a,tomorrow:r,numberOfDay:o,configData:s,setScheduleAt:d}=e,{t:c}=(0,x.Bd)(),p=(null==s?void 0:s.schedule_order_slot_duration)===0?30:null==s?void 0:s.schedule_order_slot_duration;return(0,l.jsx)(l.Fragment,{children:(null==n?void 0:n.schedule_order)&&(0,l.jsx)(m.jB,{sx:{height:"100%",paddingY:"10px"},children:(0,l.jsxs)(u.Ay,{container:!0,spacing:3,children:[(0,l.jsx)(u.Ay,{item:!0,xs:12,md:12,children:(0,l.jsx)(h.Zs,{const:!0,id:"demo-row-radio-buttons-group-label",children:c("Preferable Time")})}),(0,l.jsx)(u.Ay,{item:!0,md:6,xs:12,children:(0,l.jsxs)(z.A,{fullWidth:!0,children:[(0,l.jsx)(I.A,{children:c("Time")}),(0,l.jsxs)(k.A,{label:c("Time"),onChange:i,defaultValue:(0,D.IM)(a),children:[(0,l.jsx)(P.A,{value:(0,D.IM)(a),sx:{"&:hover":{backgroundColor:"primary.main"}},children:c("Today")}),(0,l.jsx)(P.A,{value:(0,D.IM)(r),sx:{"&:hover":{backgroundColor:"primary.main"}},children:c("Tomorrow")})]})]})}),0!==(0,D.DC)(o,null==n?void 0:n.schedules,p).length&&(0,l.jsx)(u.Ay,{item:!0,md:6,xs:12,children:(null==n?void 0:n.schedules)&&(null==n||null==(t=n.schedules)?void 0:t.length)>0&&(0,l.jsx)(h.o6,{defaultValue:(0,D.IM)(a)===o?c("Now"):"",disablePortal:!0,id:"combo-box-demo",options:(0,D.DC)(o,null==n?void 0:n.schedules,p),onChange:(e,t)=>d(null==t?void 0:t.value),renderInput:e=>(0,l.jsx)(W.A,{...e,label:c("Schedule")})},o)}),0===(0,D.DC)(o,null==n?void 0:n.schedules,p).length&&(0,l.jsx)(u.Ay,{item:!0,xs:12,children:(0,l.jsx)(T.A,{type:"info",text:"Store closed."})})]})})})};B.propTypes={};var E=n(80626),M=n(91657),L=n(23299);let F=e=>{var t;let{storeData:n,setOrderType:i,orderType:a,setAddress:r,address:o,configData:d,forprescription:I,setDeliveryTip:k,customDispatch:P,scheduleTime:W,setDayNumber:z,handleChange:D,today:T,tomorrow:F,numberOfDay:R,setScheduleAt:O,formik:Y,confirmPasswordHandler:N,passwordHandler:H,check:q,setCheck:V,isHomeDelivery:Z,page:X}=e,{t:J}=(0,x.Bd)(),U=(0,S.u)();(0,c.A)("(max-width:490px)");let[Q,$]=s.useState(null),K=e=>{"take_away"===e&&k(0),i(e)},G=e=>{V(e.target.checked)};return(0,l.jsxs)(m.jB,{spacing:{xs:1.5,md:3},children:[(0,l.jsx)(h.Zs,{const:!0,id:"demo-row-radio-buttons-group-label",children:J("Delivery Options")}),n&&(0,l.jsxs)(j.A,{direction:"row",width:"100%",justifyContent:{xs:"flex-start",md:"space-between"},gap:{xs:"5px",md:"10px"},sx:{flexWrap:{xs:"wrap",sm:"wrap",md:"nowrap"}},children:[1===Z&&(0,l.jsxs)(v.m2,{fullwidth:"true",orderType:"delivery"===a,onClick:()=>K("delivery"),hover:"true",sx:{"&:hover":{color:e=>e.palette.whiteContainer.main}},children:[(0,l.jsx)(A.A,{src:f.A.src,width:"30px",height:"30px",smWidth:"20px",smHeight:"20px"}),(0,l.jsx)(p.A,{className:"text",fontSize:{xs:"12px",md:"14px"},fontWeight:"delivery"===a?"600":"400",color:"delivery"===a?U.palette.whiteContainer.main:U.palette.neutral[700],children:J("Home Delivery")})]}),I||(null==d?void 0:d.takeaway_status)!==1?null:(0,l.jsx)(l.Fragment,{children:(null==n?void 0:n.take_away)&&(0,l.jsxs)(v.m2,{fullwidth:"true",orderType:"take_away"===a,onClick:()=>K("take_away"),children:[" ",(0,l.jsx)(A.A,{src:y.src,width:"30px",height:"30px",smWidth:"20px",smHeight:"20px"}),(0,l.jsx)(p.A,{className:"text",fontSize:{xs:"12px",md:"14px"},fontWeight:"take_away"===a?"600":"400",color:"take_away"===a?U.palette.whiteContainer.main:U.palette.neutral[700],children:J("Iâ€™ll Pick It Up MySelf")})]})}),!I&&(null==n?void 0:n.schedule_order)&&(0,M.g)()&&(0,l.jsxs)(v.m2,{fullwidth:"true",orderType:"schedule_order"===a,onClick:e=>{i("schedule_order"),$(e.currentTarget)},children:[" ",(0,l.jsx)(A.A,{src:_.src,width:"30px",height:"30px",smWidth:"20px",smHeight:"20px"}),(0,l.jsx)(p.A,{className:"text",fontSize:{xs:"12px",md:"14px"},fontWeight:"schedule_order"===a?"600":"400",color:"schedule_order"===a?U.palette.whiteContainer.main:U.palette.neutral[700],children:J("Schedule Delivery")})]})]}),"schedule_order"===a&&(0,l.jsx)(B,{storeData:n,handleChange:D,today:T,tomorrow:F,numberOfDay:R,configData:d,setScheduleAt:O}),(0,l.jsx)(g.A,{setAddress:r,address:o,configData:d,storeZoneId:null==n?void 0:n.zone_id,orderType:a}),!(0,M.g)()&&(null==d||null==(t=d.centralize_login)?void 0:t.manual_login_status)===1&&(0,l.jsxs)(j.A,{children:[(0,l.jsx)(j.A,{children:(0,l.jsx)(w.A,{onChange:e=>G(e),control:(0,l.jsx)(C.A,{}),label:(0,l.jsx)(p.A,{fontWeight:"500",fontSize:"16px",color:U.palette.neutral[1e3],children:J("Create account with exiting info.")})})}),q&&(0,l.jsxs)(u.Ay,{container:!0,spacing:2,pt:"10px",children:[(0,l.jsx)(u.Ay,{item:!0,sm:12,md:6,children:(0,l.jsx)(E.A,{required:"true",type:"password",label:J("Password"),placeholder:J("Password"),touched:Y.touched.password,errors:Y.errors.password,fieldProps:Y.getFieldProps("password"),onChangeHandler:H,value:Y.values.password,startIcon:(0,l.jsx)(b.A,{position:"start",children:(0,l.jsx)(L.A,{sx:{color:e=>e.palette.neutral[400]}})})})}),(0,l.jsx)(u.Ay,{item:!0,sm:12,md:6,children:(0,l.jsx)(E.A,{label:J("Confirm Password"),required:"true",type:"password",placeholder:J("Confirm Password"),touched:Y.touched.confirm_password,errors:Y.errors.confirm_password,fieldProps:Y.getFieldProps("confirm_password"),onChangeHandler:N,value:Y.values.confirm_password,startIcon:(0,l.jsx)(b.A,{position:"start",children:(0,l.jsx)(L.A,{sx:{color:e=>e.palette.neutral[400]}})})})})]})]})]})};F.propTypes={};var R=n(2364),O=n(1992),Y=n(24547),N=n(36085),H=n(3801),q=n(48230),V=n.n(q),Z=n(83831),X=n(55327);let J=e=>{let{placeOrder:t,orderLoading:n,zoneData:i,isStoreOpenOrNot:a,storeData:o,isSchedules:c,page:u,storeCloseToast:p,isLoading:h}=e,[g,j]=(0,s.useState)(!0),{offlineInfoStep:v}=(0,d.d4)(e=>e.offlinePayment),{t:f}=(0,x.Bd)(),y=(0,S.u)(),_=(0,r.useRouter)(),A=(0,d.wA)(),[b,I]=(0,s.useState)(!1),k=y.palette.primary.main;return(0,l.jsxs)(m.jB,{alignItems:"center",spacing:2,mt:".5rem",children:[(0,l.jsx)(N.A,{children:(0,l.jsx)(w.A,{control:(0,l.jsx)(C.A,{checked:b,onChange:e=>{I(e.target.checked)}}),label:(0,l.jsxs)(X.JZ,{fontSize:"12px",children:[f("I agree that placing the order places me under")," ",(0,l.jsx)(V(),{href:"/terms-and-conditions",style:{color:k},children:f("Terms and Conditions")})," ",f("&"),(0,l.jsxs)(V(),{href:"/privacy-policy",style:{color:k},children:[" ",f("Privacy Policy")]})]})})}),0===v?(0,l.jsx)(H.A,{type:"submit",fullWidth:!0,variant:"contained",onClick:t,loading:n||h,disabled:!b,children:f("Place Order")}):(0,l.jsx)(H.A,{fullWidth:!0,variant:"contained",onClick:e=>{(null==o?void 0:o.active)&&c()?(I(e.target.checked),A((0,Z.im)(2)),_.push({pathname:"/checkout",query:{page:u,method:"offline"}},void 0,{shallow:!0})):p()},loading:n||h,disabled:!b,children:f("Confirm Order")})]})};J.propTypes={};var U=n(65904),Q=n(97914),$=n(76776);let K=()=>(0,l.jsxs)(m.jB,{spacing:1,children:[(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}),(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}),(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}),(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}),(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}),(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]})]});var G=n(30566),ee=n(22474),et=n(50554),en=n(8168),el=n(58607),ei=n(42107);let ea=async e=>{let{tempDistance:t}=e;if(0===t||t){let{data:e}=await ei.A.get("/api/v1/vehicle/extra_charge?distance=".concat(t));return e}};function er(e){return(0,O.useQuery)("vehicle",()=>ea(e),{enabled:!1,onError:U.P1})}var eo=n(70190),es=n(10841),ed=n.n(es);let ec=async e=>{let t={...e,date_time:ed()().format("YYYY-MM-DD HH:mm:ss")},{data:n}=await ei.A.post("".concat(eo.Hu),t);return n},eu=()=>(0,O.useMutation)("get-surge",ec);var ep=n(73328);let ex=e=>{let{storeData:t,configData:n,distanceData:i,orderType:a,zoneData:r,origin:o,destination:d,totalOrderAmount:c,deliveryTip:x,taxAmount:m,setPayableAmount:g}=e,{data:j,mutate:v}=eu(),f=(0,G.A)(),{data:y,refetch:_}=er({tempDistance:(0,D.gf)(null==i?void 0:i.data,o,d)});(0,s.useEffect)(()=>{_()},[i]),(0,s.useEffect)(()=>{t&&v({zone_id:null==t?void 0:t.zone_id,module_id:null==t?void 0:t.module_id,date_time:new Date().toISOString(),guest_id:(0,M.W)()},{onError:U.Jm})},[t]);let A=(e,t,n,l,a,r,o)=>{var s,d,u,p,x,m,h,g;let v=(0,D.gf)(null==i?void 0:i.data,r,o);null==t||null==(s=t.admin_free_delivery)||s.status;let f=null==t||null==(d=t.admin_free_delivery)?void 0:d.type;null==t||null==(u=t.admin_free_delivery)||u.free_delivery_over;let _="free_delivery_to_all_store"===f,A=null==t?void 0:t.free_delivery_over,w=v*(null==t?void 0:t.per_km_shipping_charge);if(1===Number.parseInt(null==e?void 0:e.self_delivery_system))if((null==e?void 0:e.free_delivery)||_)return 0;else{if((w=v*(null==e?void 0:e.per_km_shipping_charge)||0)>(null==e?void 0:e.minimum_shipping_charge)&&w<(null==e?void 0:e.maximum_shipping_charge))return w;if(w<(null==e?void 0:e.minimum_shipping_charge))return null==e?void 0:e.minimum_shipping_charge;if((null==e?void 0:e.maximum_shipping_charge)!==null&&w>(null==e?void 0:e.maximum_shipping_charge))return null==e?void 0:e.maximum_shipping_charge}else if((null==a||null==(x=a.data)||null==(p=x.zone_data)?void 0:p.length)>0){let e=(0,D.h4)(a),t=(null==e||null==(m=e.pivot)?void 0:m.per_km_shipping_charge)||0,n=null==e||null==(h=e.pivot)?void 0:h.minimum_shipping_charge,i=null==e||null==(g=e.pivot)?void 0:g.maximum_shipping_charge;if(A&&A>0&&c>A||"take_away"===l||_)return 0;if(t){let e=v*t;return null!==n&&e<n?(0,D.pE)(n+y,j):null!==i&&e>i?(0,D.pE)(i+y,j):(0,D.pE)(e+y,j)}}},w=(0,Q.t)("This charge includes extra vehicle charge");(0,Q.t)("and bad weather charge");let C="".concat(w," ").concat((0,el.Yi)(y)).concat((null==j?void 0:j.customer_note_status)!==0?". ".concat(null==j?void 0:j.customer_note," ").concat((null==j?void 0:j.type)==="amount"?(0,el.Yi)(null==j?void 0:j.price):"".concat(null==j?void 0:j.price,"%")):"");return(0,l.jsxs)(h.q$,{container:!0,item:!0,md:12,xs:12,spacing:1,children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:(0,Q.t)("Deliveryman tips")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,el.Yi)(x)}),(null==n?void 0:n.additional_charge_status)===1?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:(0,Q.t)(null==n?void 0:n.additional_charge_name)}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(+)"}),(0,l.jsx)(p.A,{children:(0,el.Yi)(null==n?void 0:n.additional_charge)})]})})]}):null,(null==m?void 0:m.tax_included)!==null&&(null==m?void 0:m.tax_included)===0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:(0,Q.t)("TAX")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:(0,l.jsxs)(p.A,{children:[(null==m?void 0:m.tax_included)===0&&(0,l.jsx)(l.Fragment,{children:"(+)"}),(0,el.Yi)(null==m?void 0:m.tax_amount)]})})})]}):null,(0,l.jsxs)(u.Ay,{item:!0,md:8,xs:8,children:[(0,Q.t)("Delivery fee"),y>0||(null==j?void 0:j.price)>0?(0,l.jsx)(et.A,{title:C,placement:"top",arrow:!0,children:(0,l.jsx)(ep.A,{sx:{fontSize:"11px"}})}):null]}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:t&&(()=>{var e;let l=null!=(e=A(t,n,null==i?void 0:i.data,a,r,o,d))?e:0;return 0===l?"Free":(0,el.Yi)(l)})()}),(0,l.jsx)(en.A,{}),(0,l.jsxs)(h.Pd,{container:!0,md:12,xs:12,mt:"1rem",children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,pl:".5rem",children:(0,l.jsxs)(p.A,{component:"span",fontWeight:"bold",color:f.palette.primary.main,children:[(0,Q.t)("Total")," "," ",(0,l.jsx)(p.A,{component:"span",fontWeight:"400",fontSize:"14px",xs:{marginInlineStart:"5px"},children:(null==m?void 0:m.tax_included)===1&&(null==m?void 0:m.tax_included)!==null&&"(Vat/Tax incl.)"})]})}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(p.A,{color:f.palette.primary.main,children:t&&(0,el.Yi)((()=>{let e=(A(t,n,null==i?void 0:i.data,a,r,o,d)||0)+Number(x)+(null==n?void 0:n.additional_charge);return g(e),localStorage.setItem("totalAmount",e),e})())})})]})]})};var em=n(26995);let eh=["jpg","jpeg","gif","png","pdf","doc","docx","deb"],eg=e=>{let{setPrescriptionImages:t,prescriptionImages:n}=e,i=(0,Q.t)("Note Please upload a doctor verified prescription and you can upload jpg, Png");return(0,l.jsxs)(m.jB,{spacing:2.5,children:[(0,l.jsxs)(j.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,l.jsx)(h.Zs,{const:!0,id:"demo-row-radio-buttons-group-label",children:(0,Q.t)("Upload Prescription")}),(0,l.jsx)(et.A,{title:i,arrow:!0,placement:"bottom-start",sx:{cursor:"pointer",width:"194px"},children:(0,l.jsx)(ep.A,{style:{width:"16px",height:"16px"}})})]}),(0,l.jsx)(em.A,{fileImagesHandler:e=>{t(e)},totalFiles:n,maxFileSize:2e7,supportedFileFormats:eh,acceptedFileInputFormat:"application/pdf,image/*,text/plain,.doc, .docx,.txt",labelText:(0,Q.t)(" "),prescription:"true",width:"7.75rem"})]})};var ej=n(87610),ev=n(97685),ef=n(10435),ey=n(33188);let e_=e=>{let t,{deliveryTip:n,setDeliveryTip:i,isSmall:a,tripsData:r}=e,[o,d]=(0,s.useState)(!1),c=(0,S.u)(),[g,v]=(0,s.useState)(n),[f,y]=(0,s.useState)(!1),{t:_}=(0,x.Bd)(),A=e=>{t&&clearTimeout(t),t=setTimeout(()=>{i(e)},300)},w=e=>{e.target.value>-1?(v(e.target.value),A(e.target.value),y(!0)):y(!1)},C=e=>{v(e),y(!1)};return(0,s.useEffect)(()=>{A(g)},[g]),(0,l.jsx)(m.jB,{children:(0,l.jsxs)(u.Ay,{container:!0,rowGap:"14px",spacing:1,children:[(0,l.jsx)(u.Ay,{item:!0,xs:12,md:12,children:(0,l.jsx)(h.Zs,{children:_("Delivery Man Tips")})}),!o&&(0,l.jsx)(u.Ay,{item:!0,xs:12,children:(0,l.jsxs)(m.jB,{direction:"row",alignItems:!a&&"center",gap:"10px",flexWrap:"wrap",children:[[0,10,15,20,40].map((e,t)=>(0,l.jsxs)(j.A,{alignItems:"flex-start",children:[(0,l.jsxs)(m.Mz,{onClick:()=>C(e),active:e===n,children:[(0,l.jsx)(p.A,{fontSize:e===n?"14px":"12px",textTransform:"capitalize",fontWeight:"600",color:e===n?c.palette.whiteContainer.main:c.palette.primary.main,children:0===t?_("not now"):(0,el.Yi)(e)}),(null==r?void 0:r.most_tips_amount)===e&&!a&&(0,l.jsx)(j.A,{position:"absolute",bottom:"0px",alignItems:"center",width:"100%",backgroundColor:c.palette.primary.main,children:(0,l.jsx)(p.A,{color:c.palette.whiteContainer.main,fontSize:"10px",children:_("Most Tipped")})})]}),(null==r?void 0:r.most_tips_amount)===e&&a&&(0,l.jsx)(p.A,{color:c.palette.primary.main,fontSize:"10px",children:_("Most Tipped")})]},t)),(0,l.jsx)(m.Mz,{sx:{borderColor:e=>e.palette.primary.main},onClick:()=>{d(!0)},active:f,children:(0,l.jsx)(p.A,{color:f?c.palette.neutral[100]:c.palette.primary.main,fontSize:"12px",children:_("Custom")})})]})}),o&&(0,l.jsxs)(j.A,{width:"100%",direction:"row",spacing:1.8,children:[(0,l.jsx)(m.XY,{type:"number",label:_("Amount"),autoFocus:!0,value:g,onChange:e=>w(e),InputProps:{inputProps:{min:0}},onKeyPress:e=>{((null==e?void 0:e.key)==="-"||(null==e?void 0:e.key)==="+")&&e.preventDefault()}}),(0,l.jsx)(h.vU,{onClick:()=>{d(!1)},minWidth:"50px",padding:"9px 16px",children:(0,l.jsx)(ey.A,{sx:{width:"15px",height:"20px"}})})]})]})})};var eA=n(47737),ew=n(52808),eC=n(36540),eb=n(95993),eS=n(83113),eI=n(59017);let ek=e=>{let{title:t,data:n,handleChange:i}=e,[a,r]=s.useState(null),[o,d]=(0,s.useState)(null),{t:c}=(0,x.Bd)(),u=!!a,p=e=>{d(e),r(null),null==i||i(e)};return(0,l.jsxs)(m.iv,{children:[(0,l.jsxs)(eA.A,{id:"fade-button","aria-controls":u?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:e=>{r(e.currentTarget)},fullWidth:!0,sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"9px 2px",textTransform:"capitalize"},children:[c(t),u?(0,l.jsx)(eS.A,{}):(0,l.jsx)(eb.A,{})]}),(null==n?void 0:n.length)>0&&(0,l.jsx)(ew.A,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:a,open:u,onClose:()=>{r(null)},TransitionComponent:eC.A,children:null==n?void 0:n.map((e,t)=>(0,l.jsx)(P.A,{onClick:()=>p(e),sx:{textTransform:"capitalize"},children:c(e)},t))}),o&&(0,l.jsx)(eI.A,{sx:{mt:"10px",ml:"15px"},label:c(o),onDelete:()=>{d(null),null==i||i(null)}})]})},eP=["Remove it form my cart","I will wait until it is restocked","Please cancel the order","Call me ASAP","Notify me when it is back"],eW=["Deliver to the front door","Deliver to the reception desk","Avoid calling phone","Come with no sound"];var ez=n(54773),eD=n(98895),eT=n(1954),eB=n(63350),eE=n(74511),eM=n(59361),eL=n(15692);let eF=(0,ez.Ay)(eD.A)(e=>{let{theme:t}=e;return{"& .MuiStepLabel-label.Mui-completed":{color:t.palette.primary.main}}}),eR=(0,ez.Ay)(eT.A)(e=>{let{theme:t}=e;return{["&.".concat(eB.A.alternativeLabel)]:{top:10,left:"calc(-50% + 16px)",right:"calc(50% + 16px)",[t.breakpoints.down("md")]:{left:"calc(-50% + 10px)",right:"calc(50% + 10px)"}},["&.".concat(eB.A.active)]:{["& .".concat(eB.A.line)]:{borderColor:t.palette.primary.main}},["&.".concat(eB.A.completed)]:{["& .".concat(eB.A.line)]:{borderColor:t.palette.primary.main}},["& .".concat(eB.A.line)]:{borderColor:t.palette.neutral[400],borderTopWidth:3,borderRadius:1,[t.breakpoints.down("md")]:{borderTopWidth:2}}}}),eO=(0,ez.Ay)("div")(e=>{let{theme:t,ownerState:n}=e;return{color:t.palette.primary.main,display:"flex",height:22,alignItems:"center",...n.active&&{color:t.palette.primary.main},"& .QontoStepIcon-completedIcon":{color:t.palette.neutral[100],zIndex:1,fontSize:18,[t.breakpoints.down("md")]:{fontSize:10}},"& .QontoStepIcon-circle":{width:8,height:8,borderRadius:"50%",backgroundColor:t.palette.neutral[400]}}});function eY(e){let{active:t,completed:n,className:i}=e,a=(0,S.u)();return(0,l.jsx)(eO,{ownerState:{active:t},className:i,children:n?(0,l.jsx)(h.dR,{background:a.palette.primary.main,padding:{xs:"3px",md:"5px"},children:(0,l.jsx)(eL.A,{className:"QontoStepIcon-completedIcon"})}):(0,l.jsx)(h.dR,{background:a.palette.neutral[100],padding:{xs:"4px",md:"10px"},children:(0,l.jsx)("div",{className:"QontoStepIcon-circle"})})})}let eN=e=>{let{text:t,text1:n,text2:i}=e,[a,o]=(0,s.useState)(1),d=(0,r.useRouter)();return(0,s.useEffect)(()=>{"/rental/checkout"===d.pathname&&o(2)},[d.pathname]),(0,l.jsx)(m.jB,{children:(0,l.jsx)(eF,{activeStep:a,alternativeLabel:!0,connector:(0,l.jsx)(eR,{}),children:[{label:i||"Add To Cart"},{label:t||"Fill details"},{label:n||"Confirmation"}].map((e,t)=>(0,l.jsx)(eE.A,{children:(0,l.jsx)(eM.A,{StepIconComponent:eY,children:(0,Q.t)(e.label)})},t))})})};var eH=n(14379),eq=n(74441),eV=n(234),eZ=n(70946),eX=n(16501),eJ=n(72326),eU=n(67578),eQ=n(15804),e$=n(75548),eK=n(90233);let eG=e=>{let{image:t,type:n,paymentMethod:i,setPaymentMethod:a,paymentType:r,parcel:o,digitalPaymentMethodActive:s,imageUrl:u,setIsCheckedOffline:x,setPaymentMethodImage:m,storage:h,configData:g}=e,v=(0,G.A)(),f=(0,d.wA)(),y=(0,c.A)(v.breakpoints.down("md"));return(0,l.jsx)(j.A,{children:(0,l.jsx)(z.A,{children:(0,l.jsx)(eQ.A,{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",onChange:()=>{null==a||a(n),o||null==m||m(s?"".concat(t):t.src),f((0,Z.JB)("")),null==x||x(!1),f((0,Z.im)(0))},children:(0,l.jsx)(w.A,{sx:{flexGrow:1,marginInlineStart:{xs:"0px",md:"-11px"}},value:n,control:(0,l.jsx)(e$.A,{sx:{padding:{xs:"2px",md:"10px"}},checked:i===n}),label:(0,l.jsxs)(j.A,{direction:"row",gap:"8px",alignItems:"center",py:{xs:"10px",sm:"10px",md:"0px"},children:["true"===o?(0,l.jsx)(A.A,{src:s?t:t.src,width:"20px",height:"20px",objectfit:"contain",borderRadius:"50%"}):!y&&(0,l.jsx)(A.A,{width:"auto",height:"20px",objectfit:"contain",borderRadius:"50%",src:s?t:t.src}),(0,l.jsx)(p.A,{fontWeight:"true"===o?"400":"500",fontSize:{xs:"12px",sm:"12px",md:"12px"},children:r})]})})})})})},e0=()=>{let e=(0,S.u)();return(0,l.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.03612 3.75407C8.6552 3.55964 9.31462 3.45455 10 3.45455C13.615 3.45455 16.5455 6.38505 16.5455 10C16.5455 10.6854 16.4404 11.3449 16.246 11.9639C16.1256 12.3471 16.3387 12.7553 16.7219 12.8756C17.1051 12.996 17.5133 12.783 17.6337 12.3997C17.8719 11.6413 18 10.8349 18 10C18 5.58172 14.4183 2 10 2C9.16509 2 8.35873 2.12815 7.60027 2.36636C7.21707 2.48672 7.00398 2.89494 7.12434 3.27815C7.2447 3.66135 7.65292 3.87443 8.03612 3.75407ZM2 9.99993C2 8.05303 2.69625 6.26756 3.85218 4.88068L4.88585 5.91436C4.1322 6.8563 3.63389 8.01015 3.49445 9.27265H6.37745C6.40014 8.67833 6.45038 8.10276 6.52524 7.55374L7.85377 8.88225C7.84547 9.0112 7.83858 9.14138 7.83314 9.27265H8.24419L9.69876 10.7272H7.83313C7.90104 12.3684 8.19541 13.8154 8.61818 14.8724C8.86116 15.4798 9.13222 15.9225 9.39607 16.2015C9.65738 16.4778 9.86116 16.5449 9.9984 16.5454H10.003C10.2097 16.5438 10.5767 16.3744 10.9983 15.6641C11.3772 15.0257 11.7061 14.0934 11.9207 12.9492L13.1381 14.1666C12.9505 14.8823 12.7126 15.5303 12.4296 16.0799C13.0306 15.8395 13.5877 15.5124 14.0856 15.1141L15.1193 16.1478C13.7345 17.3019 11.9524 17.9978 10.009 17.9999L10 18L9.99607 17.9999C5.57961 17.9978 2 14.4169 2 9.99993ZM6.37745 10.7272H3.49449C3.76408 13.166 5.37345 15.2009 7.57024 16.0796C7.46152 15.8684 7.36072 15.6452 7.26771 15.4127C6.76612 14.1587 6.44596 12.5215 6.37745 10.7272Z",fill:"#4B5864"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.21301 2.21301C2.49703 1.929 2.95751 1.929 3.24153 2.21301L17.787 16.7585C18.071 17.0425 18.071 17.503 17.787 17.787C17.503 18.071 17.0425 18.071 16.7585 17.787L2.21301 3.24153C1.929 2.95751 1.929 2.49703 2.21301 2.21301Z",fill:e.palette.primary.main})]})},e1={src:"/_next/static/media/cod2.312876f9.svg"},e2={src:"/_next/static/media/wallet.9d5aa44a.svg"},e5=(0,ez.Ay)(eA.A)(e=>{let{theme:t,value:n,paymentMethod:l}=e;return{padding:"15px 15px",border:"1px solid #E4F4FF",filter:"drop-shadow(-1px 1px 0px ".concat((0,eq.X4)(t.palette.info.light,.2),")"),gap:"5px",color:(null==n?void 0:n.id)===(null==l?void 0:l.id)?t.palette.whiteContainer.main:t.palette.neutral[1e3],background:(null==n?void 0:n.id)===(null==l?void 0:l.id)?t.palette.primary.main:t.palette.neutral[100],"&:hover":{color:t.palette.whiteContainer.main,background:t.palette.primary.main}}}),e4=e=>{var t,n,i,a,o,c,x;let{paymentMethod:g,setPaymentMethod:j,paidBy:v,orderPlace:f,isLoading:y,zoneData:_,forprescription:w,configData:C,orderType:b,parcel:S,offlinePaymentOptions:I,setPaymentMethodImage:k,getParcelPayment:P}=e,W=(0,M.g)(),D=(0,r.useRouter)(),T=(0,G.A)(),B=(0,s.useRef)(null),E=(0,d.wA)(),{offlineMethod:L,offlineInfoStep:F}=(0,d.d4)(e=>e.offlinePayment),[R,O]=(0,s.useState)(""!==L),[Y,N]=(0,s.useState)(!1),q=()=>{N(!Y),B.current.scrollIntoView({behavior:"smooth",block:"end"})},V=e=>{E((0,Z.JB)(e)),E((0,Z.im)(1)),O(!0),j("offline_payment")};return(0,l.jsxs)(m.jB,{justifyContent:"space-between",spacing:1,children:[(0,l.jsxs)(ee.A,{alignItems:"center",gap:"10px",flexWrap:"wrap",children:[(0,l.jsx)(h.Zs,{parcel:S,children:(0,Q.t)("Payment Method")}),(0,l.jsx)(p.A,{color:T.palette.neutral[400],children:(0,Q.t)("Select a Payment Method to Proceed")})]}),(0,l.jsx)(eU.A,{sx:{maxHeight:"270px",overflowY:"auto"},children:(0,l.jsx)(eK.A,{style:{maxHeight:"270px"},children:(0,l.jsxs)(m.jB,{ref:B,direction:"true"===S?"column":"row",sx:{flexWrap:"wrap",paddingBottom:"10px",gap:{xs:"true"===S?"16px":"0px",sm:"true"===S?"16px":"0px",md:"16px"}},children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u.Ay,{container:!0,spacing:2,children:[(0,l.jsx)(u.Ay,{item:!0,spacing:3,xs:12,sm:6,children:(null==C?void 0:C.cash_on_delivery)&&(null==(t=P()[0])?void 0:t.cash_on_delivery)&&(0,l.jsxs)(m.jB,{flexDirection:"row",alignItems:"center",padding:"14px 9px",gap:"10px",sx:{backgroundColor:"cash_on_delivery"===g&&(0,eq.X4)(T.palette.primary.main,.1),border:"cash_on_delivery"===g?"1px solid ".concat((0,eq.X4)(T.palette.secondary.light,.3)):"1px solid ".concat((0,eq.X4)(T.palette.neutral[400],.3)),borderRadius:"10px",cursor:"pointer"},onClick:()=>j("cash_on_delivery"),children:[(0,l.jsx)(ee.A,{width:"32px",height:"32px",justifyContent:"center",alignItems:"center",backgroundColor:T.palette.primary.main,borderRadius:"50%",children:(0,l.jsx)(A.A,{width:"22px",height:"22px",objectfit:"contain",src:e1.src})}),(0,l.jsx)(p.A,{color:"neutral[400]",children:(0,Q.t)("Cash on delivery")})]})}),(0,l.jsx)(u.Ay,{item:!0,spacing:3,xs:12,sm:6,children:(null==C?void 0:C.customer_wallet_status)===1&&W&&"receiver"!==v&&"true"!==w&&(0,l.jsxs)(m.jB,{flexDirection:"row",alignItems:"center",padding:"14px 9px",gap:"10px",sx:{backgroundColor:"wallet"===g&&(0,eq.X4)(T.palette.primary.main,.1),border:"wallet"===g?"1px solid ".concat((0,eq.X4)(T.palette.secondary.light,.3)):"1px solid ".concat((0,eq.X4)(T.palette.neutral[400],.3)),borderRadius:"10px",cursor:"pointer"},onClick:()=>j("wallet"),children:[(0,l.jsx)(ee.A,{width:"32px",height:"32px",justifyContent:"center",alignItems:"center",backgroundColor:T.palette.customColor.parcelWallet,borderRadius:"50%",children:(0,l.jsx)(A.A,{width:"20px",height:"20px",objectfit:"contain",src:e2.src})}),(0,l.jsx)(p.A,{color:"neutral[400]",children:(0,Q.t)("Pay via Wallet")})]})})]}),(0,l.jsxs)(ee.A,{children:["receiver"!==v&&(0,l.jsxs)(ee.A,{p:"10px 0",flexDirection:"row",gap:"10px",children:[(0,l.jsx)(p.A,{fontSize:"16px",fontWeight:500,children:(0,Q.t)("Pay Via Online")}),(0,l.jsx)(p.A,{color:T.palette.neutral[400],children:(0,Q.t)("Faster & secure way to pay bill")})]}),"receiver"!==v&&"true"!==w&&(null==C||null==(n=C.digital_payment_info)?void 0:n.digital_payment)&&(null==(i=P()[0])?void 0:i.digital_payment)&&(0,l.jsx)(l.Fragment,{children:null==C||null==(a=C.active_payment_method_list)?void 0:a.map((e,t)=>{var n,i;return(0,l.jsx)(eG,{parcel:S,paymentType:null==e?void 0:e.gateway_title,image:null==e?void 0:e.gateway_image_full_url,paymentMethod:g,setPaymentMethod:j,setIsCheckedOffline:O,paidBy:v,type:null==e?void 0:e.gateway,digitalPaymentMethodActive:null==C||null==(n=C.digital_payment_info)?void 0:n.digital_payment,imageUrl:null==C||null==(i=C.base_urls)?void 0:i.gateway_image_url},t)})})]})]}),(0,l.jsx)(ee.A,{pb:"20px",children:(null==(o=P()[0])?void 0:o.offline_payment)&&void 0!==I&&(null==(x=Object)||null==(c=x.keys(I))?void 0:c.length)!==0&&(null==C?void 0:C.offline_payment_status)===1&&"receiver"!==v?(0,l.jsx)(m.jB,{padding:"10px",borderRadius:"10px",backgroundColor:(0,eq.X4)(T.palette.primary.main,.1),onClick:q,sx:{cursor:"pointer"},children:(0,l.jsxs)(m.jB,{gap:"10px",children:[(0,l.jsxs)(m.jB,{flexDirection:"row",justifyContent:"space-between",children:[(0,l.jsx)(z.A,{sx:{marginRight:{xs:"0px"}},children:(0,l.jsx)(eQ.A,{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",fontWeight:"600",children:(0,l.jsx)(m.jr,{value:"Pay Offline",control:(0,l.jsx)(e$.A,{sx:{padding:{xs:"2px",md:"10px"}},checked:R,onClick:q}),label:(0,l.jsxs)(ee.A,{flexDirection:"row",gap:"16px",paddingLeft:{xs:"5px",sm:"5px",md:"10px"},children:[(0,l.jsx)(e0,{}),(0,l.jsxs)(p.A,{fontSize:"14px",fontWeight:"500",children:[(0,Q.t)("Pay Offline"),(0,l.jsxs)(p.A,{component:"span",fontSize:"10px",ml:"5px",children:["( ",(0,Q.t)("Select option from below")," )"]})]})]})})})}),(0,l.jsx)(et.A,{placement:"left",title:"Offline Payment! Now, with just a click of a button, you can make secure transactions. It's simple, convenient, and reliable.",children:(0,l.jsx)(ep.A,{fontSize:"16px",sx:{color:T.palette.primary.main}})})]}),Y&&(0,l.jsx)(m.jB,{children:(0,l.jsx)(m.jB,{flexDirection:"row",gap:"20px",children:null==I?void 0:I.map((e,t)=>(0,l.jsx)(e5,{value:e,paymentMethod:L,onClick:()=>V(e),children:(0,l.jsx)(p.A,{fontSize:"12px",textTransform:"capitalize",children:e.method_name})},t))})})]})}):null})]})})}),(0,l.jsx)(h.EI,{children:v&&0===F?(0,l.jsx)(m.jB,{children:(0,l.jsx)(H.A,{type:"submit",fullWidth:!0,variant:"contained",onClick:f,loading:y,children:(0,Q.t)("Confirm Parcel Request")})}):(0,l.jsx)(m.jB,{children:(0,l.jsx)(H.A,{fullWidth:!0,variant:"contained",onClick:e=>{D.push({pathname:"/checkout",query:{page:"parcel",method:"offline"}},void 0,{shallow:!0})},children:(0,Q.t)("Confirm Order")})})})]})};var e3=n(82736),e7=n(51665);let e8={src:"/_next/static/media/wallet.d3e26d4b.png"},e6={src:"/_next/static/media/money.5c6e876c.png"},e9=()=>(0,l.jsxs)("svg",{width:"31",height:"31",viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M24.5508 9.09356V12.2878C24.5504 12.4289 24.4942 12.5641 24.3944 12.6638C24.2947 12.7636 24.1595 12.8198 24.0184 12.8202H4.3194C3.54447 12.8206 2.79585 12.5391 2.21315 12.0283C1.63045 11.5174 1.25346 10.812 1.15247 10.0437C1.05149 9.27539 1.23342 8.49656 1.66432 7.85249C2.09522 7.20841 2.74568 6.74304 3.4944 6.54319C3.76281 6.46743 4.0405 6.42957 4.3194 6.43069H21.8888C22.5949 6.43082 23.272 6.71144 23.7713 7.21083C24.2705 7.71021 24.5509 8.38745 24.5508 9.09356Z",fill:"#C6E5FF"}),(0,l.jsx)("path",{d:"M24.5508 9.09329V12.2875C24.5504 12.4286 24.4942 12.5638 24.3945 12.6636C24.2947 12.7633 24.1595 12.8195 24.0184 12.8199H4.31945C3.76043 12.8211 3.21109 12.6742 2.72732 12.394C2.7222 12.229 2.7222 12.0639 2.7222 11.894C2.71911 10.0827 2.9792 8.28057 3.49432 6.54404C3.76274 6.46829 4.04042 6.43042 4.31932 6.43154H21.8888C22.5947 6.43168 23.2717 6.71214 23.7709 7.21128C24.2701 7.71042 24.5506 8.38737 24.5508 9.09329Z",fill:"#DAF1FF"}),(0,l.jsx)("path",{d:"M24.551 9.09389V12.2881C24.5506 12.4292 24.4944 12.5644 24.3946 12.6641C24.2949 12.7639 24.1597 12.8201 24.0186 12.8205H12.7635C11.9777 10.7884 11.7231 8.58953 12.0236 6.43164H21.889C22.595 6.43177 23.2721 6.71231 23.7713 7.21156C24.2705 7.7108 24.5509 8.38788 24.551 9.09389Z",fill:"white"}),(0,l.jsx)("path",{d:"M25.9402 11.84C25.9411 11.8579 25.9393 11.8758 25.9351 11.8932C25.8803 12.2394 25.7246 12.5616 25.4874 12.8196C25.4275 12.8858 25.3635 12.948 25.2957 13.006L17.0809 19.9006L13.2374 23.1271C13.1427 23.2084 13.0214 23.252 12.8966 23.2495C12.8197 23.2498 12.7436 23.2332 12.6737 23.201C12.6039 23.1688 12.5419 23.1218 12.4921 23.0631L3.58985 12.4629C3.5007 12.3538 3.45685 12.2147 3.46735 12.0742C3.47268 12.0044 3.49192 11.9364 3.52392 11.8742C3.55593 11.8119 3.60006 11.7567 3.65373 11.7117L6.3106 9.48148L14.0624 2.97548L15.7124 1.59111C16.0499 1.30174 16.482 1.1464 16.9265 1.15461C17.1461 1.1562 17.3627 1.20559 17.5613 1.29936C17.7599 1.39314 17.9357 1.52903 18.0765 1.69761L25.605 10.6634C25.7436 10.8252 25.8437 11.0164 25.8979 11.2225C25.9549 11.4231 25.9694 11.6334 25.9402 11.84Z",fill:"#FE9C39"}),(0,l.jsx)("path",{d:"M25.9404 11.84C25.9413 11.8579 25.9395 11.8758 25.9353 11.8932C25.8805 12.2394 25.7248 12.5616 25.4875 12.8196C25.4277 12.8858 25.3637 12.948 25.2959 13.006L17.081 19.9006C14.6329 19.0575 12.3996 17.6875 10.5387 15.8873C8.67776 14.087 7.23452 11.9003 6.31079 9.48148L14.0625 2.97548L15.7125 1.59111C16.0501 1.30174 16.4821 1.1464 16.9267 1.15461C17.1463 1.1562 17.3629 1.20559 17.5615 1.29936C17.7601 1.39314 17.9359 1.52903 18.0767 1.69761L25.6052 10.6634C25.7437 10.8252 25.8439 11.0164 25.898 11.2225C25.9551 11.4231 25.9695 11.6334 25.9404 11.84Z",fill:"#FED154"}),(0,l.jsx)("path",{d:"M25.9404 11.84C25.8712 11.8454 25.8021 11.8454 25.733 11.8454C23.0843 11.8511 20.5072 10.9859 18.3984 9.38321C16.2896 7.78049 14.7661 5.52903 14.0625 2.97548L15.7125 1.59111C16.05 1.30174 16.4821 1.1464 16.9266 1.15461C17.1462 1.1562 17.3629 1.20559 17.5615 1.29936C17.7601 1.39314 17.9359 1.52903 18.0766 1.69761L25.6051 10.6634C25.7437 10.8252 25.8438 11.0164 25.898 11.2225C25.9551 11.4231 25.9695 11.6334 25.9404 11.84Z",fill:"#FEEC88"}),(0,l.jsx)("path",{d:"M11.1859 21.2132C11.1082 21.2134 11.0314 21.1964 10.9609 21.1636C10.8904 21.1308 10.8281 21.0828 10.7782 21.0232L5.30131 14.5012C5.21041 14.3929 5.16625 14.2529 5.17853 14.112C5.19081 13.9711 5.25854 13.8409 5.36681 13.75L14.6418 5.96621C14.75 5.8756 14.8898 5.83162 15.0304 5.8439C15.171 5.85617 15.3009 5.92372 15.3918 6.03171C15.8033 6.52208 17.0651 6.31496 17.6704 5.80671C17.7786 5.7161 17.9184 5.67212 18.059 5.6844C18.1996 5.69667 18.3296 5.76422 18.4204 5.87221L21.5501 9.59996C21.6409 9.70802 21.6851 9.84774 21.6729 9.98839C21.6608 10.129 21.5932 10.2591 21.4852 10.35C20.8798 10.8578 20.4571 12.0632 20.8692 12.5546C20.9142 12.6081 20.9482 12.67 20.9692 12.7367C20.9902 12.8034 20.9979 12.8736 20.9918 12.9433C20.9856 13.013 20.9658 13.0808 20.9334 13.1427C20.901 13.2047 20.8567 13.2597 20.8031 13.3046L11.5281 21.0885C11.4324 21.1691 11.3113 21.2134 11.1862 21.2135M6.45931 14.2238L11.2509 19.9312L19.7779 12.7762C19.4148 11.8637 19.8264 10.6705 20.4279 9.92033L17.9118 6.92233C17.0686 7.38558 15.8217 7.58358 14.9852 7.06933L6.45931 14.2238Z",fill:"white"}),(0,l.jsx)("path",{d:"M27.7454 14.4173V27.195C27.7452 27.9011 27.4647 28.5782 26.9654 29.0775C26.4661 29.5768 25.789 29.8574 25.0829 29.8575H3.78753C3.08144 29.8574 2.40432 29.5768 1.90504 29.0775C1.40576 28.5782 1.1252 27.9011 1.12503 27.195V10.158C1.12301 10.107 1.13205 10.0561 1.15153 10.0089C1.20994 10.5012 1.38292 10.9729 1.6566 11.3862C1.93027 11.7995 2.29702 12.1429 2.72741 12.3888C3.20972 12.673 3.75971 12.822 4.31953 12.82H25.4875C25.7246 12.562 25.8802 12.2398 25.9349 11.8937C26.4627 12.0722 26.9211 12.4117 27.2459 12.8644C27.5707 13.3171 27.7454 13.8602 27.7454 14.4173Z",fill:"#039D55"}),(0,l.jsx)("path",{d:"M27.7453 14.4173V27.1951C27.7451 27.9011 27.4646 28.5783 26.9653 29.0775C26.466 29.5768 25.7889 29.8574 25.0828 29.8576H15.516C8.2113 27.2963 2.93504 20.4654 2.72729 12.3888C3.2096 12.673 3.7596 12.822 4.31942 12.8201H25.4874C25.7245 12.562 25.8801 12.2398 25.9348 11.8937C26.4625 12.0722 26.921 12.4117 27.2458 12.8644C27.5706 13.3171 27.7453 13.8602 27.7453 14.4173Z",fill:"#099352"}),(0,l.jsx)("path",{d:"M27.7454 14.4173V20.8648C26.8361 21.0641 25.9077 21.1641 24.9768 21.1629C22.3366 21.1688 19.7565 20.3748 17.5763 18.8855C15.3962 17.3963 13.7182 15.2816 12.7634 12.8201H25.4876C25.7246 12.562 25.8803 12.2398 25.9349 11.8937C26.4627 12.0722 26.9212 12.4117 27.2459 12.8644C27.5707 13.3171 27.7454 13.8602 27.7454 14.4173Z",fill:"#067541"}),(0,l.jsx)("path",{d:"M29.8749 19.2092V23.4686C29.8737 23.8918 29.705 24.2973 29.4057 24.5966C29.1064 24.8958 28.7009 25.0645 28.2777 25.0657H24.0184C23.0303 25.0646 22.083 24.6716 21.3843 23.9729C20.6857 23.2742 20.2927 22.3269 20.2916 21.3388C20.2904 21.1371 20.3082 20.9357 20.3449 20.7373C20.4875 19.8655 20.9352 19.0728 21.608 18.5004C22.2808 17.9281 23.1351 17.6133 24.0184 17.6123H28.2777C28.6413 17.6139 28.9938 17.7376 29.2786 17.9637C29.4644 18.1138 29.6144 18.3035 29.7175 18.519C29.8207 18.7345 29.8745 18.9703 29.8749 19.2092Z",fill:"#FE9C39"}),(0,l.jsx)("path",{d:"M29.2786 17.9634C28.5691 20.5984 27.2527 23.0307 25.4347 25.0657H24.0184C23.0303 25.0646 22.083 24.6716 21.3843 23.9729C20.6857 23.2742 20.2927 22.3269 20.2916 21.3388C20.2904 21.1371 20.3082 20.9357 20.3449 20.7373C20.4875 19.8655 20.9352 19.0728 21.608 18.5004C22.2808 17.9281 23.1351 17.6133 24.0184 17.6123H28.2777C28.6412 17.6138 28.9937 17.7375 29.2786 17.9634Z",fill:"#FED154"}),(0,l.jsx)("path",{d:"M24.3008 17.6113C23.2168 18.9198 21.8688 19.9847 20.345 20.7363C20.4876 19.8646 20.9352 19.0718 21.608 18.4995C22.2809 17.9271 23.1351 17.6123 24.0185 17.6113H24.3008Z",fill:"#FEEC88"}),(0,l.jsx)("path",{d:"M26.1481 21.3392C26.1481 21.5498 26.0857 21.7557 25.9687 21.9308C25.8516 22.106 25.6853 22.2425 25.4908 22.3231C25.2962 22.4037 25.082 22.4248 24.8755 22.3837C24.6689 22.3426 24.4791 22.2412 24.3302 22.0923C24.1813 21.9433 24.0799 21.7536 24.0388 21.547C23.9977 21.3404 24.0188 21.1263 24.0994 20.9317C24.18 20.7371 24.3165 20.5708 24.4917 20.4538C24.6668 20.3368 24.8727 20.2744 25.0833 20.2744C25.3657 20.2745 25.6364 20.3867 25.8361 20.5864C26.0358 20.786 26.148 21.0568 26.1481 21.3392Z",fill:"white"}),(0,l.jsx)("path",{d:"M5.38418 24.5334C5.31426 24.5334 5.24503 24.5197 5.18043 24.4929C5.11583 24.4662 5.05714 24.427 5.0077 24.3775C4.95826 24.3281 4.91905 24.2694 4.8923 24.2048C4.86555 24.1402 4.85179 24.0709 4.85181 24.001V18.6769C4.85181 18.5357 4.9079 18.4003 5.00774 18.3005C5.10758 18.2006 5.24299 18.1445 5.38418 18.1445C5.52538 18.1445 5.66079 18.2006 5.76063 18.3005C5.86047 18.4003 5.91656 18.5357 5.91656 18.6769V24.001C5.91657 24.0709 5.90281 24.1402 5.87607 24.2048C5.84932 24.2694 5.8101 24.3281 5.76066 24.3775C5.71123 24.427 5.65253 24.4662 5.58793 24.4929C5.52333 24.5197 5.4541 24.5334 5.38418 24.5334Z",fill:"white"})]}),te=e=>{let{handlePartialPayment:t,usePartialPayment:n,walletBalance:i,paymentMethod:a,removePartialPayment:r,switchToWallet:o,remainingBalance:s,payableAmount:d,margin:c}=e,u=(0,S.u)();return(0,l.jsxs)(tt,{children:[(0,l.jsxs)(m.jB,{direction:"row",spacing:1,children:[(0,l.jsx)(e9,{}),(0,l.jsxs)(j.A,{children:[(0,l.jsx)(p.A,{fontSize:"10px",color:u.palette.neutral[500],children:"wallet"===a&&o?(0,Q.t)("Remaining Balance"):(0,Q.t)("Wallet Balance")}),(0,l.jsx)(p.A,{fontSize:"20px",fontWeight:"700",color:u.palette.primary.main,children:"wallet"===a&&o?(0,el.Yi)(s):(0,el.Yi)(i)})]})]}),n||o?(0,l.jsx)(eA.A,{variant:"outlined",onClick:r,sx:{color:u.palette.error.main},children:(0,Q.t)("Remove")}):(0,l.jsx)(eA.A,{variant:"outlined",onClick:t,children:(0,Q.t)("Apply")})]})},tt=(0,ez.Ay)(ee.A)(e=>{let{theme:t,value:n,paymentMethod:l}=e;return{padding:"10px 10px",width:"100%",gap:"5px",border:"1px solid",borderColor:(0,eq.X4)(t.palette.neutral[400],.4),borderRadius:"10px",flexDirection:"row",justifyContent:"space-between",alignItems:"center",color:t.palette.neutral[1e3],cursor:"pointer",height:"100%"}}),tn=(0,ez.Ay)(eA.A)(e=>{let{theme:t,value:n,paymentMethod:l}=e;return{padding:"13px 20px",border:"1px solid #E4F4FF",gap:"5px",color:(null==n?void 0:n.id)===(null==l?void 0:l.id)?t.palette.whiteContainer.main:t.palette.neutral[1e3],background:(null==n?void 0:n.id)===(null==l?void 0:l.id)?t.palette.primary.main:t.palette.neutral[100],"&:hover":{color:t.palette.whiteContainer.main,background:t.palette.primary.main}}}),tl=e=>{var t,n,i,a,r,o,c;let{paymentMethod:x,setPaymentMethod:g,paidBy:j,forprescription:v,configData:f,orderType:y,parcel:_,setOpenModel:C,usePartialPayment:b,offlinePaymentOptions:I,setPaymentMethodImage:k,isZoneDigital:P,handlePartialPayment:W,walletBalance:D,removePartialPayment:T,switchToWallet:B,customerData:E,payableAmount:L}=e,F=(0,S.u)(),R=(0,d.wA)();(0,M.g)(),F.palette.neutral[400];let[O,Y]=(0,s.useState)(!1),{offlineMethod:N}=(0,d.d4)(e=>e.offlinePayment),[H,q]=(0,s.useState)(""!==N),V=()=>{Y(!O)},X=e=>{g(e),R((0,Z.JB)("")),q(!1)},J=e=>{R((0,Z.JB)(e)),q(!0),g("offline_payment")},U=()=>{C(!1)};return(0,l.jsxs)(m.jB,{spacing:1,children:[(0,l.jsxs)(m.jB,{p:{xs:"20px",md:"45px 45px 10px 45px"},sx:{maxHeight:"450px",overflowY:"auto",overflowX:"hidden"},children:[(0,l.jsxs)(ee.A,{width:"100%",justifyContent:"space-between",direction:"row",mb:"1rem",gap:"20px",children:[(0,l.jsxs)(ee.A,{children:[(0,l.jsx)(h.Zs,{children:(0,Q.t)("Payment Method")}),(0,l.jsx)(p.A,{pt:"5px",fontSize:"12px",children:(0,Q.t)("Select a Payment Method to Proceed ")})]}),(0,l.jsxs)(ee.A,{children:[(0,l.jsx)(p.A,{pb:"5px",fontSize:"14px",fontWeight:"500",children:(0,Q.t)("Total Bill")}),(0,l.jsx)(p.A,{fontSize:"20px",fontWeight:"700",children:(0,el.Yi)(L)})]})]}),(0,l.jsxs)(m.jB,{spacing:1,children:[(0,l.jsxs)(m.jB,{direction:"row",sx:{flexWrap:"wrap",gap:"10px"},children:[(null==f?void 0:f.customer_wallet_status)===1&&(null==E||null==(t=E.data)?void 0:t.wallet_balance)>0&&(null==f?void 0:f.partial_payment_status)===1&&(0,l.jsx)(eU.A,{sx:{flex:"1 1 calc(50% - 5px)"},children:(0,l.jsx)(te,{remainingBalance:(null==E||null==(n=E.data)?void 0:n.wallet_balance)-L,handlePartialPayment:W,usePartialPayment:b,walletBalance:null==E||null==(i=E.data)?void 0:i.wallet_balance,paymentMethod:x,switchToWallet:B,removePartialPayment:T,payableAmount:L})}),(b||B)&&(0,l.jsx)(eU.A,{sx:{flex:"1 1 calc(50% - 5px)"},children:(0,l.jsxs)(ee.A,{backgroundColor:(0,eq.X4)(F.palette.neutral[500],.1),borderRadius:"10px",width:"100%",height:"100%",alignItems:"center",justifyContent:"center",padding:"10px",children:[(0,l.jsxs)(ee.A,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"10px",width:"100%",children:[(0,l.jsx)(p.A,{fontSize:"12px",color:F.palette.neutral[600],fontWeight:"600",children:(0,Q.t)("Paid By Wallet")}),(0,l.jsx)(p.A,{fontSize:"20px",color:F.palette.neutral[600],fontWeight:"500",children:(0,el.Yi)("wallet"===x?L:D)})]}),b?(0,l.jsxs)(ee.A,{direction:"row",justifyContent:"space-between",alignItems:"center",gap:"10px",width:"100%",children:[(0,l.jsx)(p.A,{fontSize:"12px",textTransform:"capitalize",color:F.palette.neutral[1e3],fontWeight:"600",children:(0,Q.t)("Remaining Bill")}),(0,l.jsx)(p.A,{fontSize:"18px",color:F.palette.neutral[1e3],fontWeight:"700",children:(0,el.Yi)(L-D)})]}):null]})}),b?(0,l.jsx)(eU.A,{sx:{flex:"1 1 calc(100% - 5px)",display:"flex",justifyContent:"center",py:"10px"},children:(0,l.jsx)(p.A,{fontSize:"10px",color:F.palette.error.main,fontWeight:"400",children:(0,Q.t)("* Please select an option to pay the rest of the amount")})}):null,b?((null==P?void 0:P.cash_on_delivery)&&(null==f?void 0:f.cash_on_delivery)&&(null==f?void 0:f.partial_payment_method)==="both"||(null==f?void 0:f.partial_payment_method)==="cod")&&(0,l.jsx)(eU.A,{sx:{flex:"1 1 calc(50% - 5px)"},minHeight:"67px",children:(0,l.jsxs)(tt,{value:"cash_on_delivery",paymentMethod:x,onClick:()=>X("cash_on_delivery"),children:[(0,l.jsxs)(ee.A,{direction:"row",gap:"5px",alignItems:"center",children:[(0,l.jsx)(A.A,{src:e6.src,width:"20px",height:"20px",alt:"cod"}),(0,l.jsx)(p.A,{fontSize:"12px",fontWeight:"600",children:(0,Q.t)("Cash On Delivery")})]}),"cash_on_delivery"===x?(0,l.jsx)(e3.A,{sx:{color:e=>e.palette.primary.main}}):(0,l.jsx)(e7.A,{sx:{color:e=>e.palette.neutral[400]}})]})}):(null==P?void 0:P.cash_on_delivery)&&(null==f?void 0:f.cash_on_delivery)&&(0,l.jsx)(eU.A,{sx:{flex:"1 1 calc(50% - 5px)"},minHeight:"67px",children:(0,l.jsxs)(tt,{value:"cash_on_delivery",paymentMethod:x,onClick:()=>X("cash_on_delivery"),children:[(0,l.jsxs)(ee.A,{direction:"row",gap:"5px",alignItems:"center",children:[(0,l.jsx)(A.A,{src:e6.src,width:"20px",height:"20px",alt:"cod"}),(0,l.jsx)(p.A,{fontSize:"12px",fontWeight:"600",children:(0,Q.t)("Cash On Delivery")})]}),"cash_on_delivery"===x?(0,l.jsx)(e3.A,{sx:{color:e=>e.palette.primary.main}}):(0,l.jsx)(e7.A,{sx:{color:e=>e.palette.neutral[400]}})]})})]}),(null==P?void 0:P.digital_payment)&&"receiver"!==j&&"true"!==v&&(null==f||null==(a=f.digital_payment_info)?void 0:a.digital_payment)&&((null==f?void 0:f.partial_payment_method)==="digital_payment"||(null==f?void 0:f.partial_payment_method)==="both"||(null==f?void 0:f.partial_payment_method)===null)&&(0,l.jsxs)(m.jB,{paddingY:"10px",children:[(0,l.jsxs)(p.A,{fontSize:"14px",fontWeight:"500",children:[(0,Q.t)("Payment Methods"),(0,l.jsx)(p.A,{component:"span",fontSize:"10px",ml:"5px",children:(0,Q.t)("(Faster & secure way to pay bill)")})]}),(0,l.jsx)(m.jB,{spacing:1,children:(0,l.jsx)(u.Ay,{container:!0,children:null==f||null==(r=f.active_payment_method_list)?void 0:r.map((e,t)=>{var n,i,a;return(0,l.jsx)(u.Ay,{item:!0,xs:(null==f||null==(n=f.active_payment_method_list)?void 0:n.length)>1?6:12,children:(0,l.jsx)(eG,{parcel:_,paymentType:null==e?void 0:e.gateway_title,image:null==e?void 0:e.gateway_image_full_url,paymentMethod:x,setPaymentMethod:g,setIsCheckedOffline:q,paidBy:j,type:null==e?void 0:e.gateway,imageUrl:null==f||null==(i=f.base_urls)?void 0:i.gateway_image_url,digitalPaymentMethodActive:null==f||null==(a=f.digital_payment_info)?void 0:a.digital_payment,setPaymentMethodImage:k,storage:null==e?void 0:e.storge,configData:f})},t)})})})]})]}),(0,l.jsx)(ee.A,{onClick:V,sx:{cursor:"pointer"},children:(null==f?void 0:f.offline_payment_status)===1&&(null==P?void 0:P.offline_payment)&&"true"!==v&&void 0!==I&&(null==(c=Object)||null==(o=c.keys(I))?void 0:o.length)!==0?(0,l.jsx)(ee.A,{padding:"10px 10px 10px 10px",borderRadius:"10px",backgroundColor:(0,eq.X4)(F.palette.primary.main,.1),border:"1px solid ".concat((0,eq.X4)(F.palette.primary.main,.3)),children:(0,l.jsxs)(m.jB,{gap:"10px",children:[(0,l.jsx)(m.jB,{flexDirection:"row",justifyContent:"space-between",children:(0,l.jsx)(z.A,{sx:{marginRight:{xs:"0px"},marginLeft:{xs:"5px"}},children:(0,l.jsx)(eQ.A,{"aria-labelledby":"demo-radio-buttons-group-label",name:"radio-buttons-group",fontWeight:"600",children:(0,l.jsx)(w.A,{value:(0,Q.t)("Pay Offline"),control:(0,l.jsx)(e$.A,{sx:{padding:{xs:"2px",md:"5px"}},checked:H,onClick:V}),label:(0,l.jsxs)(ee.A,{flexDirection:"row",gap:"5px",paddingLeft:"5px",children:[(0,l.jsx)(e0,{}),(0,l.jsxs)(p.A,{fontSize:"12px",fontWeight:"500",children:[(0,Q.t)("Pay Offline"),(0,l.jsx)(et.A,{placement:"left",title:(0,Q.t)("Offline Payment! Now, with just a click of a button, you can make secure transactions. It's simple, convenient, and reliable."),children:(0,l.jsx)(ep.A,{fontSize:"16px",sx:{color:F.palette.primary.main}})})]})]})})})})}),O&&(0,l.jsx)(m.jB,{children:(0,l.jsx)(m.jB,{flexDirection:"row",gap:"20px",children:null==I?void 0:I.map((e,t)=>(0,l.jsx)(tn,{value:e,paymentMethod:N,onClick:()=>J(e),children:(0,l.jsx)(p.A,{fontSize:"12px",children:e.method_name})},t))})})]})}):null})]}),(0,l.jsx)(ee.A,{direction:"row",width:"100%",spacing:1,paddingBottom:"20px",px:"16px",position:"sticky",bottom:0,zIndex:10,children:(0,l.jsx)(eA.A,{fullWidth:!0,variant:"contained",onClick:()=>U(),disabled:!x&&!H,style:{borderRadius:"5px",padding:"8px 22px"},children:(0,Q.t)("Proceed")})})]})},ti=e=>{let{paymentMethod:t,setPaymentMethod:n,paidBy:i,orderPlace:a,isLoading:r,zoneData:o,forprescription:s,configData:d,orderType:c,parcel:u,setOpenModel:p,offlinePaymentOptions:x,usePartialPayment:h,setPaymentMethodImage:g,setSwitchToWallet:j,isZoneDigital:v,getParcelPayment:f,handlePartialPayment:y,walletBalance:_,removePartialPayment:A,switchToWallet:w,customerData:C,payableAmount:b}=e;return(0,l.jsx)(m.jB,{spacing:2,children:"true"===u?(0,l.jsx)(e4,{setPaymentMethod:n,paymentMethod:t,zoneData:o,configData:d,orderType:c,parcel:u,paidBy:i,orderPlace:a,isLoading:r,offlinePaymentOptions:x,setPaymentMethodImage:g,getParcelPayment:f}):(0,l.jsx)(tl,{setPaymentMethod:n,paymentMethod:t,zoneData:o,configData:d,orderType:c,setOpenModel:p,usePartialPayment:h,forprescription:s,offlinePaymentOptions:x,setPaymentMethodImage:g,setSwitchToWallet:j,isZoneDigital:v,handlePartialPayment:y,walletBalance:_,removePartialPayment:A,switchToWallet:w,customerData:C,payableAmount:b})})};var ta=n(45270);let tr=(0,eH.A)(m.jB)(e=>{let{theme:t}=e;return{borderRadius:"5px",border:"1px solid",borderColor:(0,eq.X4)(t.palette.primary.main,.5),boxShadow:"px 3px 20px -5px rgba(3, 157, 85, 0.10)",padding:"15px",alignItems:"center",background:t.palette.neutral[100],cursor:"pointer"}}),to=e=>{let{setPaymentMethod:t,paymentMethod:n,zoneData:i,configData:a,orderType:r,usePartialPayment:o,forprescription:c,offlinePaymentOptions:u,setSwitchToWallet:x,isZoneDigital:g,setPaymentMethodImage:v,paymentMethodImage:f,handlePartialPayment:y,walletBalance:_,removePartialPayment:w,switchToWallet:C,customerData:b,payableAmount:I}=e,[k,P]=(0,s.useState)(!1),{offlineMethod:W}=(0,d.d4)(e=>e.offlinePayment),z=(0,S.u)(),D=(0,d.wA)();return(0,s.useEffect)(()=>{(null==n?void 0:n.match("offline_payment"))?(D((0,Z.im)(1)),v(e0)):D((0,Z.im)(0)),"cash_on_delivery"===n?v(e6.src):"wallet"===n&&v(e8.src)},[n]),(0,l.jsxs)(m.jB,{spacing:2,children:[(0,l.jsx)(h.Zs,{const:!0,id:"demo-row-radio-buttons-group-label",children:(0,Q.t)("Payment Method")}),(0,l.jsxs)(tr,{direction:"row",justifyContent:"space-between",onClick:()=>{P(!0)},sx:{justifyContent:"space-between"},children:[n||o?(0,l.jsxs)(j.A,{direction:"row",gap:1,alignItems:"center",children:[(null==n?void 0:n.match("offline_payment"))?(0,l.jsx)(e0,{}):(0,l.jsx)(l.Fragment,{children:o?(0,l.jsx)(ta.A,{style:{width:"20px",height:"20px"}}):(0,l.jsx)(A.A,{src:f,width:"auto",height:"20px",alt:"Payment Method Image",objectfit:"contain"})}),(0,l.jsxs)(p.A,{fontSize:"12px",fontWeight:"500",component:"span",textTransform:"capitalize",children:[o?(0,Q.t)("Paid By Wallet"):"offline_payment"===n?"".concat(null==n?void 0:n.replaceAll("_"," ")," (").concat(null==W?void 0:W.method_name,")"):(0,Q.t)(null==n?void 0:n.replaceAll("_"," "))," ",":"," ",(0,l.jsx)(p.A,{component:"span",fontWeight:"500",fontSize:"12px",children:(0,el.Yi)(o?_:I)})]}),o&&n&&(0,l.jsxs)(p.A,{fontSize:"12px",fontWeight:"500",component:"span",textTransform:"capitalize",paddingInlineStart:{xs:"0xp",md:"50px"},children:["offline_payment"===n?"".concat((0,Q.t)("offline payment")," (").concat(null==W?void 0:W.method_name,")"):(0,Q.t)(n.replaceAll("_"," "))," ",(0,Q.t)("(Due)")," "," ",":"," ",(0,l.jsx)(p.A,{component:"span",fontWeight:"500",fontSize:"12px",children:(0,el.Yi)(I-_)})]})]}):(0,l.jsxs)(j.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,l.jsx)(ta.A,{style:{width:"20px",height:"20px"}}),(0,l.jsx)(p.A,{fontSize:"12px",fontWeight:"500",children:(0,Q.t)("Select Payment Method")}),(0,l.jsx)(j.A,{sx:{cursor:"pointer"},children:(0,l.jsx)(et.A,{arrow:!0,placement:"top",TransitionComponent:eV.A,title:(0,Q.t)("Please select a payment method"),children:(0,l.jsx)(ep.A,{style:{width:"16px",height:"16px"}})})})]}),(0,l.jsx)(eX.A,{style:{width:"20px",height:"20px"},color:"primary"})]}),k&&(0,l.jsxs)(eJ.A,{openModal:k,handleClose:()=>P(!1),minWidth:"300px",maxWidth:"660px",children:[(0,l.jsx)(m.jB,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{position:"relative"},children:(0,l.jsx)(eZ.A,{onClick:()=>P(!1),sx:{zIndex:"99",position:"absolute",top:10,right:10,backgroundColor:e=>e.palette.neutral[100],borderRadius:"50%",[z.breakpoints.down("md")]:{top:10,right:5}},children:(0,l.jsx)(ey.A,{sx:{fontSize:"16px",fontWeight:"500"}})})}),(0,l.jsx)(ti,{setPaymentMethod:t,paymentMethod:n,zoneData:i,configData:a,orderType:r,usePartialPayment:o,setOpenModel:P,forprescription:c,offlinePaymentOptions:u,paymentMethodImage:f,setPaymentMethodImage:v,setSwitchToWallet:x,isZoneDigital:g,handlePartialPayment:y,walletBalance:_,removePartialPayment:w,switchToWallet:C,customerData:b,payableAmount:I})]})]})},ts=async()=>{let{data:e}=await ei.A.get("".concat(eo.xY));return e};function td(){return(0,O.useQuery)("most-trips",()=>ts(),{enabled:!0,onError:U.P1})}let tc=async e=>{let{data:t}=await ei.A.post("".concat(eo.p4),e);return t},tu=()=>(0,O.useMutation)("get-t",tc),tp=e=>{let{storeId:t,page:n}=e,i=(0,r.useRouter)(),a=(0,S.u)(),o=(0,d.wA)(),x=(0,c.A)("(max-width:1180px)"),g=(0,c.A)(a.breakpoints.down("md")),[v,f]=(0,s.useState)("delivery"),[y,_]=(0,s.useState)(void 0),[A,w]=(0,s.useState)(null),[C,b]=(0,s.useState)(null),[I,k]=(0,s.useState)(null),[P,W]=(0,s.useState)(null),[z,T]=(0,s.useState)(0),[B,E]=(0,s.useState)(""),[L,N]=(0,s.useState)(""),{configData:H}=(0,d.d4)(e=>e.configData),{data:q,refetch:V}=(0,R.A)(t),{guestUserInfo:X}=(0,d.d4)(e=>e.guestUserInfo),$=(0,M.W)(),[G,ee]=(0,s.useState)(0),{mutate:et,data:en}=tu();(0,s.useEffect)(()=>{V()},[t]),(0,s.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("currentLatLng")),t=localStorage.getItem("location");_({...e,latitude:null==e?void 0:e.lat,longitude:null==e?void 0:e.lng,address:t,address_type:"Selected Address"}),V()},[]);let el=JSON.parse(window.localStorage.getItem("currentLatLng")),ei=e=>{E(e.target.value)},{data:ea}=(0,O.useQuery)(["zoneId",location],async()=>Y.k.getZoneId(el),{retry:1}),{data:er,refetch:eo}=(0,O.useQuery)(["get-distance",q,y],()=>Y.k.distanceApi(q,y),{enabled:!1,onError:U.Jm});(0,s.useEffect)(()=>{q&&y&&eo()},[q,y]);let{mutate:es,isLoading:ed}=(0,O.useMutation)("order-place",ej.X.prescriptionPlaceOrder),ec=()=>{let e={latitude:null==q?void 0:q.latitude,longitude:null==q?void 0:q.longitude};return{...y,payment_method:C,order_type:v,store_id:null==q?void 0:q.id,distance:(0,D.gf)(null==er?void 0:er.data,e,y),prescriptionImages:A,order_note:B,dm_tips:z,unavailable_item_note:I,delivery_instruction:P,guest_id:$,is_prescription:!0,...!(0,M.g)()&&{contact_person_name:null==X?void 0:X.contact_person_name,contact_person_number:null==X?void 0:X.contact_person_number}}};(0,s.useEffect)(()=>{q&&et(ec(),{onError:e=>{var t,n,l;null==e||null==(l=e.response)||null==(n=l.data)||null==(t=n.errors)||t.forEach(e=>ev.oR.error(e.message,{position:"bottom-right"}))}})},[null==q?void 0:q.id]);let eu=()=>{es(ec(),{onSuccess:e=>{if(e){var t,n,l;ev.oR.success(null==e||null==(t=e.data)?void 0:t.message),(0,M.g)()?(o((0,Z.s0)(!0)),i.push({pathname:"/profile",query:{orderId:null==e||null==(l=e.data)?void 0:l.order_id,page:"my-orders",from:"checkout"}},void 0,{shallow:!0})):i.push({pathname:"/home",query:{order_id:null==e||null==(n=e.data)?void 0:n.order_id}},void 0,{shallow:!0})}},onError:e=>{var t,n,l;null==e||null==(l=e.response)||null==(n=l.data)||null==(t=n.errors)||t.forEach(e=>ev.oR.error(e.message,{position:"bottom-right"}))}})},{data:ep}=td(),em=(0,D.e5)(null==q?void 0:q.zone_id,null==ea?void 0:ea.data);return(0,l.jsxs)(u.Ay,{container:!0,spacing:3,mb:"2rem",paddingTop:{xs:"1.5rem",md:"2.5rem"},children:[(0,l.jsx)(u.Ay,{item:!0,xs:12,md:x?12:7,children:(0,l.jsxs)(j.A,{spacing:3,children:[(0,l.jsx)(eN,{}),ea&&(0,l.jsx)(to,{setPaymentMethod:b,paymentMethod:C,zoneData:ea,configData:H,orderType:v,forprescription:"true",isZoneDigital:em,setPaymentMethodImage:N,paymentMethodImage:L,payableAmount:G}),(0,l.jsx)(eg,{prescriptionImages:A,setPrescriptionImages:w}),(0,l.jsx)(F,{storeData:q,setOrderType:f,orderType:v,setAddress:_,address:y,configData:H,forprescription:!0,setDeliveryTip:T,isHomeDelivery:null==H?void 0:H.home_delivery_status,page:n}),"take_away"!==v&&(0,l.jsx)(e_,{deliveryTip:z,setDeliveryTip:T,tripsData:ep,isSmall:g})]})}),(0,l.jsx)(u.Ay,{item:!0,xs:12,md:x?12:5,height:"auto",children:(0,l.jsx)(m.WU,{height:"auto",padding:"20px",children:(0,l.jsxs)(j.A,{spacing:1,justifyContent:"space-between",children:[(0,l.jsx)(h.t1,{textAlign:"left",children:(0,Q.t)("Order Summary")}),(0,l.jsx)(ek,{title:"Add More Delivery Instruction",data:eW,handleChange:e=>{W(e)}}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(j.A,{children:(0,l.jsx)(p.A,{fontSize:"16px",fontWeight:"600",textAlign:"left",children:(0,Q.t)("Additional Note")})}),(0,l.jsx)(m.Ky,{"aria-label":"empty textarea",placeholder:(0,Q.t)("Additional Note"),style:{width:"100%",minHeight:"50px",marginTop:"20px"},onChange:e=>ei(e)})]}),er&&q?(0,l.jsx)(ex,{taxAmount:en,storeData:q,distanceData:er,configData:H,orderType:v,origin:{latitude:null==q?void 0:q.latitude,longitude:null==q?void 0:q.longitude},destination:y,zoneData:ea,totalOrderAmount:0,deliveryTip:z,setPayableAmount:ee}):(0,l.jsx)(K,{}),(0,l.jsx)(J,{placeOrder:()=>{C&&"cash_on_delivery"===C?A.length>0?eu():ev.oR.error(ef.Mt):ev.oR.error((0,Q.t)("Without any payment method, you can not place the order."))},orderLoading:ed,zoneData:ea})]})})})]})},tx=e=>{let{page:t,cartList:n,campaignItemList:l,buyNowItemList:i}=e,a=(0,r.useRouter)();return(0,s.useEffect)(()=>{let e=setTimeout(()=>{n&&(null==n?void 0:n.length)===0&&"cart"===t?a.push("/home"):(null==l?void 0:l.length)===0&&"campaign"===t&&a.push("/home")},5e3);return()=>clearTimeout(e)},[n,t,a,l,i]),null};var tm=n(20489);let th=async e=>{let{data:t}=await ei.A.put("/api/v1/customer/order/offline-payment",e);return t},tg=()=>(0,O.useMutation)("offline_method",e=>th(e),{});var tj=n(89257),tv=n(16433),tf=n(42014);n(16394);var ty=n(71928);let t_=async()=>{let{data:e}=await ei.A.get(eo.FW);return e};function tA(){return(0,O.useQuery)("offline-payments",t_,{enabled:!1,onError:U.Jm})}var tw=n(59338),tC=n(10574),tb=n(39465),tS=n(46208),tI=n(54750);let tk=(0,ez.Ay)(e=>{let{className:t,...n}=e;return(0,l.jsx)(et.A,{...n,classes:{popper:t}})})(e=>{let{theme:t}=e;return{["& .".concat(tC.A.tooltip)]:{minWidth:"430px",backgroundColor:t.palette.neutral[100],color:t.palette.neutral[1e3],boxShadow:t.shadows[1],fontSize:11,[t.breakpoints.down("sm")]:{minWidth:"380px"}}}}),tP=e=>{let{t,handleImageUpload:n,borderRadius:i}=e,a=(0,G.A)(),[r,o]=(0,s.useState)("");(0,s.useEffect)(()=>{"string"!=typeof r&&(null==n||n(r))},[r]);let d=e=>{o(e.currentTarget.files[0])};return(0,l.jsxs)(m.jB,{alignItems:"flex-start",justifyContent:"center",spacing:3,children:[(0,l.jsxs)(m.jB,{flexDirection:"row",justifyContent:"space-between",children:[(0,l.jsxs)(p.A,{fontSize:{xs:"14px",sm:"14px",md:"16px"},fontWeight:"600",alignItems:"center",children:[t("Prescription")," ",(0,l.jsxs)("span",{style:{color:a.palette.error.light,fontSize:"12px"},children:["(",t("Max size 2MB"),")"]})," "]}),(0,l.jsx)(tk,{TransitionComponent:eV.A,title:(0,l.jsx)("div",{children:(0,l.jsxs)(m.jB,{minWidth:{xs:"350px",sm:"400px"},p:"10px",gap:"10px",sx:{backgroundColor:a.palette.neutral[100]},children:[(0,l.jsx)(p.A,{fontWeight:500,children:t("Why upload prescription -")}),(0,l.jsxs)("ol",{type:"1",style:{color:a.palette.neutral[400],fontSize:"12px",paddingLeft:"10px",marginTop:"0px"},children:[(0,l.jsx)("li",{children:(0,l.jsx)(p.A,{sx:{color:a.palette.neutral[400]},children:t("You're free from the fear of losing prescriptions, find your digital prescription with Lifetime Cure.")})}),(0,l.jsx)("li",{children:(0,l.jsx)(p.A,{sx:{color:a.palette.neutral[400]},children:t("According to government regulations, prescription is mandatory for ordering some medicines.")})}),(0,l.jsx)("li",{children:(0,l.jsx)(p.A,{sx:{color:a.palette.neutral[400]},children:t("No problem if you can't understand the doctor's handwriting, our Pharmacist will assist you in ordering the medicine by viewing the prescription.")})})]})]})}),children:(0,l.jsx)(eZ.A,{children:(0,l.jsx)(tI.A,{color:"primary.main",sx:{height:"18px",width:"18px"}})})})]}),(0,l.jsx)(m.jB,{alignItems:"center",justifyContent:"center",sx:{alignItems:"center",justifyContent:"center",marginTop:"15px !important",paddingBottom:"20px"},children:(0,l.jsxs)(j.A,{width:"140px",position:"relative",children:[(0,l.jsx)(tb.A,{type:"file",hintText:"Image format - jpg, png, jpeg, gif Image Size - maximum size 2 MB Image Ratio - 1:1",file:r,onChange:d,imageOnChange:e=>{o(e)},width:"8.75rem",borderRadius:null!=i?i:"50%"}),"string"!=typeof r&&(0,l.jsx)(tS.A,{top:"10px",right:"10px",height:"30px",width:"30px",iconSize:"15px",imageChangeHandler:d})]})})]})};tP.propTypes={};let tW=()=>{let e=(0,G.A)().palette.primary.main;return(0,l.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M2 18V7.725C1.45 7.725 0.979167 7.52917 0.5875 7.1375C0.195833 6.74583 0 6.275 0 5.725V0.575C0 0.425 0.0583333 0.291667 0.175 0.175C0.291667 0.0583333 0.425 0 0.575 0C0.725 0 0.8625 0.0583333 0.9875 0.175C1.1125 0.291667 1.175 0.425 1.175 0.575V4.125H2.175V0.575C2.175 0.425 2.23333 0.291667 2.35 0.175C2.46667 0.0583333 2.6 0 2.75 0C2.9 0 3.03333 0.0583333 3.15 0.175C3.26667 0.291667 3.325 0.425 3.325 0.575V4.125H4.325V0.575C4.325 0.425 4.3875 0.291667 4.5125 0.175C4.6375 0.0583333 4.775 0 4.925 0C5.075 0 5.20833 0.0583333 5.325 0.175C5.44167 0.291667 5.5 0.425 5.5 0.575V5.725C5.5 6.275 5.30417 6.74583 4.9125 7.1375C4.52083 7.52917 4.05 7.725 3.5 7.725V18H2ZM9 18V7.675C8.31667 7.29167 7.8 6.775 7.45 6.125C7.1 5.475 6.925 4.725 6.925 3.875C6.925 2.875 7.17917 1.97917 7.6875 1.1875C8.19583 0.395833 8.89167 0 9.775 0C10.6583 0 11.3542 0.395833 11.8625 1.1875C12.3708 1.97917 12.625 2.875 12.625 3.875C12.625 4.725 12.4417 5.475 12.075 6.125C11.7083 6.775 11.1833 7.29167 10.5 7.675V18H9ZM14.35 18V0C15.3167 0.0833333 16.1667 0.4625 16.9 1.1375C17.6333 1.8125 18 2.65 18 3.65V9.75H15.85V18H14.35Z",fill:e})})};var tz=n(61535);let tD=e=>{let{isChecked:t,handleChange:n}=e,[i,a]=(0,s.useState)(t),{t:r}=(0,x.Bd)();return(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",p:"5px",spacing:.5,children:[(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",spacing:2,children:[(0,l.jsx)(tW,{}),(0,l.jsxs)(j.A,{alignItems:"flex-start",spacing:.5,children:[(0,l.jsx)(p.A,{color:"primary",fontWeight:"bold",children:r("Add Cutlery")}),(0,l.jsx)(p.A,{color:"text.secondary",variant:"body2",children:r("Dont have a cutlery? Restaurant will provide you.")})]})]}),(0,l.jsx)(tz.Yq,{checked:i,onChange:e=>{a(e.target.checked),null==n||n(e.target.checked)},noimage:"true"})]})};tD.propTypes={};var tT=n(55734);let tB={applyCoupon:(e,t)=>ei.A.get("/api/v1/coupon/apply?code=".concat(e,"&store_id=").concat(t))};var tE=n(50969),tM=n(85576),tL=n(84264);let tF=(0,ez.Ay)(m.jB)(e=>{let{theme:t}=e;return{border:"1px solid ".concat(t.palette.primary.main),borderRadius:"5px",padding:"10px",gap:"10px",alignItems:"center"}}),tR=e=>{let{removeCoupon:t,couponInfo:n}=e,i=(0,S.u)();return(0,l.jsxs)(tF,{direction:"row",children:[(0,l.jsx)(h.vU,{minWidth:"24px",padding:"6px 6px",children:(0,l.jsx)(tM.A,{sx:{width:"15px",height:"15px"}})}),(0,l.jsxs)(j.A,{flexGrow:"1",children:[(0,l.jsxs)(p.A,{fontSize:"14px",fontWeight:"500",color:i.palette.primary.dark,children:[null==n?void 0:n.title,(0,l.jsx)(p.A,{component:"span",fontSize:"10px",color:i.palette.neutral[400],marginLeft:"4px",children:(0,Q.t)("Applied")})]}),(0,l.jsx)(p.A,{fontSize:"10px",color:i.palette.neutral[400],children:(null==n?void 0:n.discount_type)==="amount"?"".concat((0,el.Yi)(null==n?void 0:n.discount)," off"):"".concat(null==n?void 0:n.discount,"%off")})]}),(0,l.jsx)(eZ.A,{onClick:t,children:(0,l.jsx)(tL.A,{sx:{width:"18px",height:"18px",color:e=>e.palette.error.main}})})]})},tO=e=>{let t,{store_id:n,setCouponDiscount:i,couponDiscount:a,totalAmount:r,deliveryFee:o,deliveryTip:c,setSwitchToWallet:p,payableAmount:m,walletBalance:g,min_order_amount:j}=e,v=(0,G.A)(),{couponInfo:f}=(0,d.d4)(e=>e.profileInfo),[y,_]=(0,s.useState)(null==f?void 0:f.code),{t:A}=(0,x.Bd)(),w=(0,d.wA)();t=JSON.parse(localStorage.getItem("zoneid"));let{isLoading:C,refetch:b}=(0,O.useQuery)("apply-coupon",()=>tB.applyCoupon(y,n),{onSuccess:e=>{var n,l,a,s,d,u;let p=r-o-c;j&&p<j?Number.parseInt(null==e||null==(n=e.data)?void 0:n.min_purchase)<=Number.parseInt(p)?(null==e||null==(l=e.data)?void 0:l.discount_type)==="percent"||(null==e||null==(a=e.data)?void 0:a.discount)&&m>=(null==e||null==(s=e.data)?void 0:s.discount)?(w((0,tE.fP)(e.data)),ev.oR.success(A("Coupon Applied")),w((0,tE.ly)(e.data.coupon_type)),i({...e.data,zoneId:t})):ev.oR.error(A("Your total price must be more then coupon amount")):ev.oR.error("".concat(A(ef.sH)," ").concat((0,el.Yi)(null==e||null==(d=e.data)?void 0:d.min_purchase))):ev.oR.error("".concat(A(ef.sH)," ").concat((0,el.Yi)(null==e||null==(u=e.data)?void 0:u.min_purchase)))},onError:U.Jm,enabled:!1,retry:1});(0,s.useEffect)(()=>()=>{w((0,tE.fP)(null))},[]);let S=async()=>{await b()},I=v.palette.primary.main;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.Ay,{container:!0,justifyContent:"flex-start",pt:"20px",pb:"10px",spacing:1,children:f?(0,l.jsx)(u.Ay,{item:!0,xs:12,sm:12,md:12,children:(0,l.jsx)(tR,{removeCoupon:()=>{i(null),localStorage.removeItem("coupon"),_(null),w((0,tE.fP)(null)),p(!1)},couponInfo:f})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:9,xs:8,sm:7,pr:{xs:"0px",sm:"8px",md:"8px"},pb:{xs:"8px",sm:"0px",md:"0px"},children:(0,l.jsx)(h.FO,{variant:"outlined",sx:{height:"100%",border:"1px solid ".concat(I),borderRadius:"5px"},children:(0,l.jsx)(tT.Ay,{placeholder:A("Enter Your Coupon.."),sx:{flex:1,width:"100%",padding:"5px 10px 5px",[v.breakpoints.down("sm")]:{fontSize:"12px"}},onChange:e=>_(e.target.value),value:y||"",onKeyPress:e=>{"Enter"===e.key&&S()}})})}),(0,l.jsx)(u.Ay,{item:!0,md:3,xs:4,sm:5,pb:{xs:"8px",sm:"0px",md:"0px"},children:(0,l.jsx)(h.p$,{loading:C,loadingPosition:"start",variant:"contained",onClick:S,disabled:""===y||!y,children:A("Apply")})})]})})})};var tY=n(89037);let tN=e=>{var t,n,i;let{cartList:a,storeData:r,couponDiscount:o,distanceData:c,configData:g,orderType:j,deliveryTip:v,origin:f,destination:y,zoneData:_,setDeliveryFee:A,extraCharge:b,walletBalance:S,setPayableAmount:I,additionalCharge:k,payableAmount:P,cashbackAmount:W,handleExtraPackaging:z,isPackaging:T,packagingCharge:B,customerData:E,initVauleEx:L,isLoading:F,taxAmount:R,scheduleAt:O}=e,Y=(0,M.g)(),{t:N}=(0,x.Bd)(),[H,q]=(0,s.useState)("false"),{profileInfo:V}=(0,d.d4)(e=>e.profileInfo),Z=null!=b?b:0,X=(0,G.A)(),J="coupon",{data:Q,mutate:K}=eu();(0,s.useEffect)(()=>{r&&K({zone_id:null==r?void 0:r.zone_id,module_id:null==r?void 0:r.module_id,date_time:"schedule_order"===j?O:new Date().toISOString(),guest_id:(0,M.W)()},{onError:U.Jm})},[r,j,O]);let ei=o?(0,D.sR)(a)-(0,D.fT)(a,r)-(0,D.a3)(o,r,a):(0,D.sR)(a)-(0,D.fT)(a,r),ea=(0,d.wA)(),er=(0,el.mY)(ei,null==E||null==(t=E.data)?void 0:t.discount_amount,null==E||null==(n=E.data)?void 0:n.discount_amount_type),eo=()=>{let e=(0,D.vk)(a,o,r,g,c,J,j,H,Number(v),_,f,y,b,k,B,er,null==R?void 0:R.tax_amount,Q);return I(e),ea((0,tf.nm)(e)),e},es={value:0},ed=(0,D.fT)(a,r,es);eo();let ec=(null==V?void 0:V.is_valid_for_discount)?eo()-er:eo(),ex=N("After completing the order, you will receive a"),em=N("cashback. The minimum purchase required to avail this offer is"),eh=N("However, the maximum cashback amount is"),eg=N("This delivery fee includes all the applicable charges on delivery");N("and bad weather charge");let ej="".concat(eg).concat((null==Q?void 0:Q.customer_note_status)!==0?". ".concat(null==Q?void 0:Q.customer_note," "):"");return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(h.q$,{container:!0,item:!0,xs:12,spacing:1,mt:"1rem",children:[(null==r?void 0:r.extra_packaging_status)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,xs:8,children:(0,l.jsx)(w.A,{onChange:e=>z(e),control:(0,l.jsx)(C.A,{}),label:(0,l.jsx)(p.A,{fontWeight:"400",fontSize:"13px",color:X.palette.primary.main,children:N("Extra Packaging")})})}),(0,l.jsx)(u.Ay,{item:!0,xs:4,align:"right",alignSelf:"center",children:(0,l.jsx)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:(0,l.jsx)(p.A,{children:(0,el.Yi)(L)})})})]}):null,(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:a.length>1?N("Items Price"):N("Item Price")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(p.A,{textTransform:"capitalize",align:"right",children:(0,el.Yi)((0,D.GY)(a))})}),(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:N("Discount")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ee.A,{width:"100%",direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(-)"}),(0,l.jsx)(p.A,{children:r?(0,el.Yi)(ed):null})]})}),o?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:N("Coupon Discount")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:"free_delivery"===o.coupon_type?(0,l.jsx)(p.A,{textTransform:"capitalize",children:N("Free Delivery")}):(0,l.jsxs)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(-)"}),(0,l.jsx)(p.A,{children:r&&a&&(()=>{let e=(0,D.a3)(o,r,a);return o&&"free_delivery"===o.coupon_type?(q("true"),0):(0,el.Yi)(e)})()})]})})]}):null,(null==E||null==(i=E.data)?void 0:i.is_valid_for_discount)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:N("Referral Discount")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ee.A,{width:"100%",direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(-)"}),(0,l.jsx)(p.A,{children:(0,el.Yi)(er)})]})})]}):null,(null==R?void 0:R.tax_included)!==null&&(null==R?void 0:R.tax_included)===0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,children:N("VAT/TAX")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:(0,l.jsxs)(p.A,{children:[(null==R?void 0:R.tax_included)===0&&(0,l.jsx)(l.Fragment,{children:"(+)"}),(0,el.Yi)(null==R?void 0:R.tax_amount)]})})})]}):null,("delivery"===j||"schedule_order"===j)&&1===Number.parseInt(null==g?void 0:g.dm_tips_status)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,sx:{textTransform:"capitalize"},children:N("Deliveryman tips")}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsxs)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(+)"}),(0,l.jsx)(p.A,{children:(0,el.Yi)(v)})]})})]}):null,(null==g?void 0:g.additional_charge_status)===1?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,xs:8,sx:{textTransform:"capitalize"},children:N(null==g?void 0:g.additional_charge_name)}),(0,l.jsx)(u.Ay,{item:!0,xs:4,align:"right",children:(0,l.jsxs)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(+)"}),(0,l.jsx)(p.A,{children:(0,el.Yi)(null==g?void 0:g.additional_charge)})]})})]}):null,T?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,xs:8,sx:{textTransform:"capitalize"},children:N("Extra Packaging")}),(0,l.jsx)(u.Ay,{item:!0,xs:4,align:"right",children:(0,l.jsxs)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:[(0,l.jsx)(p.A,{children:"(+)"}),(0,l.jsx)(p.A,{children:(0,el.Yi)(B)})]})})]}):null,(0,l.jsx)(l.Fragment,{children:F?(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{paddingInlineStart:"5px"},children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}):(0,l.jsx)(l.Fragment,{children:"delivery"===j||"schedule_order"===j?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,xs:8,sx:{textTransform:"capitalize"},children:(0,l.jsxs)(p.A,{component:"span",align:"center",children:[N("Delivery fee"),1!==Number.parseInt(null==r?void 0:r.self_delivery_system)&&(0,l.jsx)(p.A,{component:"span",children:(0,l.jsx)(et.A,{title:ej,placement:"top",arrow:!0,children:(0,l.jsx)(ep.A,{sx:{fontSize:"11px"}})})})]})}),(0,l.jsx)(u.Ay,{item:!0,xs:4,align:"right",children:o&&(null==o?void 0:o.coupon_type)==="free_delivery"?(0,l.jsx)(p.A,{children:N("Free")}):r&&(()=>{let e=(0,D.E0)(r,g,a,null==c?void 0:c.data,o,J,j,_,f,y,Z,Q);return(A("delivery"!==j?0:e),0===e)?(0,l.jsx)(p.A,{children:N("Free")}):(0,l.jsxs)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,width:"100%",children:[(0,l.jsx)(p.A,{children:"(+)"}),(0,l.jsx)(p.A,{children:r&&(0,el.Yi)(e)})]})})()})]}):null})}),(0,l.jsx)(en.A,{border:"1px"}),(0,l.jsx)(h.Pd,{container:!0,md:12,xs:12,mt:"1rem",children:F?(0,l.jsxs)(m.jB,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{paddingInlineStart:"5px"},children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Ay,{item:!0,md:8,xs:8,sx:{textTransform:"capitalize",fontWeight:"700",color:e=>e.palette.primary.main,paddingInlineStart:"7px"},children:(0,l.jsxs)(p.A,{component:"span",sx:{textTransform:"capitalize",fontWeight:"700"},children:[N("Total"),(0,l.jsx)(p.A,{sx:{marginInlineStart:"5px"},component:"span",fontSize:"12px",fontWeight:"400",color:X.palette.primary.main,children:(null==R?void 0:R.tax_included)===1&&(null==R?void 0:R.tax_included)!==null&&"(Vat/Tax incl.)"})]})}),(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,align:"right",children:(0,l.jsx)(ee.A,{direction:"row",alignItems:"center",justifyContent:"flex-end",spacing:.5,children:(0,l.jsxs)(p.A,{color:X.palette.primary.main,align:"right",children:[" ",r&&a&&(0,el.Yi)(ec)]})})})]})}),(null==es?void 0:es.value)>0?(0,l.jsx)(p.A,{sx:{fontSize:"14px",fontWeight:"400",width:"100%",color:e=>e.palette.neutral[1e3],padding:"5px 0px",backgroundColor:"#FFF6CA"},align:"center",children:N("You got ".concat((0,el.Yi)(null==es?void 0:es.value)," additional discount"))}):null,Y&&(null==W?void 0:W.cashback_amount)>0&&(0,l.jsx)(u.Ay,{item:!0,xs:12,children:(0,l.jsx)(tY.A,{borderRadius:"5px",borderLeft:"2px solid ".concat(X.palette.primary.main),padding:"0.3rem",paddingLeft:"0.7rem",backgroundColor:(0,eq.X4)(X.palette.primary.main,.051),fontSize:{xs:"0.7rem"},children:(null==W?void 0:W.cashback_amount)>0?"".concat(ex," ").concat((null==W?void 0:W.cashback_type)==="percentage"?(null==W?void 0:W.cashback_amount)+"%":(0,el.Yi)(null==W?void 0:W.cashback_amount)," ").concat(em," ").concat((0,el.Yi)(null==W?void 0:W.min_purchase),". ").concat((null==W?void 0:W.cashback_type)==="percentage"?eh+" "+(0,el.Yi)(null==W?void 0:W.max_discount)+".":"","\n"):""})})]})})};tN.propTypes={},n(70532);let tH=e=>{var t;let{configData:n,campaignItemList:i,t:a}=e;return null==n||null==(t=n.base_urls)||t.campaign_image_url,(0,l.jsx)(l.Fragment,{children:i.map(e=>(0,l.jsxs)(u.Ay,{container:!0,md:12,xs:12,spacing:{xs:1},children:[(0,l.jsx)(u.Ay,{item:!0,md:4,xs:4,children:(0,l.jsx)(A.A,{height:"90px",width:"90px",src:null==e?void 0:e.image_full_url,loading:"lazy",borderRadius:"10px"})}),(0,l.jsxs)(u.Ay,{item:!0,md:8,xs:8,children:[(0,l.jsx)(h.Ky,{children:null==e?void 0:e.name}),(0,l.jsxs)(h.nY,{children:[a("Qty")," : ",null==e?void 0:e.quantity]}),(0,l.jsx)(h.NV,{children:(0,el.Yi)(null==e?void 0:e.price)})]})]},null==e?void 0:e.id))})};tH.propTypes={};var tq=n(95809);let tV=e=>{var t;let{configData:n,cartList:i,t:a,isSmall:r}=e,o=(0,G.A)();return null==n||null==(t=n.base_urls)||t.item_image_url,(0,l.jsxs)(l.Fragment,{children:[i.length>0?i.map((e,t)=>(0,l.jsxs)(m.jB,{direction:"row",alignItems:"flex-start",spacing:{xs:1,sm:1,md:2},mt:0!==t&&"1rem",children:[(0,l.jsx)(ee.A,{position:"relative",children:(0,l.jsx)(A.A,{height:"30px",width:"30px",src:null==e?void 0:e.image_full_url,loading:"lazy"})}),(0,l.jsxs)(ee.A,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",width:"100%",children:[(0,l.jsxs)(ee.A,{direction:"row",spacing:1.3,children:[(0,l.jsxs)(h.nY,{children:[e.quantity,(0,l.jsx)(p.A,{component:"span",fontSize:"12px",pl:"5px",children:"x"})]}),(0,l.jsxs)(ee.A,{children:[(0,l.jsxs)(tY.A,{children:[(0,l.jsx)(h.Ky,{children:e.name}),0!==e.is_prescription_required&&(0,l.jsx)(tY.A,{fontSize:"10px",sx:{color:o.palette.error.main},children:a("Prescription Required")})]}),(0,l.jsx)(tq.A,{cartItem:e})]})]}),(0,l.jsx)(h.NV,{children:(0,el.Yi)((0,D.OV)(e))})]})]},t)):(0,l.jsxs)(m.jB,{direction:"row",alignItems:"flex-start",spacing:2,children:[(0,l.jsx)($.A,{variant:"rectangular",height:"90px",width:"95px"}),(0,l.jsxs)(ee.A,{children:[(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"}),(0,l.jsx)($.A,{variant:"text",width:"50px"})]})]}),(0,l.jsx)(u.Ay,{item:!0,md:12,xs:12,children:(0,l.jsx)(ee.A,{width:"100%",sx:{mt:"20px",borderBottom:"2px solid ".concat(o.palette.neutral[300])}})})]})};tV.propTypes={};let tZ=e=>{let{page:t,configData:n,cartList:i,t:a,campaignItemList:r,isSmall:o}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(u.Ay,{item:!0,md:12,xs:12,container:!0,spacing:1,mt:"20px",pl:"10px",children:[("cart"===t||"buy_now"===t)&&(0,l.jsx)(tV,{configData:n,cartList:i,t:a,isSmall:o}),"campaign"===t&&(0,l.jsx)(tH,{configData:n,campaignItemList:r,t:a})]})})};tZ.propTypes={};let tX={src:"/_next/static/media/note.66198fd5.png"};var tJ=n(79403);let tU=e=>{let{payableAmount:t,agree:n,reject:i,title:a,colorTitle:r,remainingBalance:o}=e,s=(0,S.u)();return(0,l.jsxs)(m.jB,{p:"1rem",spacing:1.5,sx:{maxWidth:"434px"},children:[(0,l.jsxs)(j.A,{alignItems:"center",spacing:1.5,padding:"10px",children:[(0,l.jsxs)(j.A,{children:[(0,l.jsx)(A.A,{src:tX.src,width:"34px",height:"34px"}),(0,l.jsx)(p.A,{fontWeight:"700",children:(0,Q.t)("Note !")})]}),(0,l.jsx)(j.A,{justifyContent:"center",alignItems:"center",children:(0,l.jsxs)(p.A,{fontWeight:"500",fontSize:"16px",textAlign:"center",children:[a,(0,l.jsx)(p.A,{fontWeight:"500",fontSize:"16px",color:s.palette.primary.main,component:"span",children:r})]})}),(0,l.jsxs)(j.A,{direction:"row",alignItems:"center",spacing:.5,children:[(0,l.jsx)(e9,{}),(0,l.jsx)(p.A,{fontWeight:"700",fontSize:"20px",color:s.palette.primary.main,children:(0,el.Yi)(t)}),(0,l.jsx)(p.A,{children:"(Order Amount)"})]}),o&&(0,l.jsxs)(p.A,{fontSize:"12px",children:["Remaining Wallet Balance :",(0,l.jsx)(p.A,{component:"span",fontSize:"12px",children:(0,el.Yi)(o)})]})]}),(0,l.jsxs)(j.A,{direction:"row",width:"100%",spacing:1,children:[(0,l.jsx)(tJ.i,{fullWidth:!0,onClick:i,children:(0,Q.t)("No")}),(0,l.jsx)(eA.A,{fullWidth:!0,variant:"contained",onClick:n,children:"Yes"})]})]})},tQ={scheduleMonth:"",scheduleTime:ed()().format("HH:mm")||"",ampm:"pm"},t$=(e,t)=>{switch(t.type){case"SET_SCHEDULE_MONTH":return{...e,scheduleMonth:t.payload};case"SET_SCHEDULE_TIME":return{...e,scheduleTime:t.payload};case"SET_AMPM":return{...e,ampm:t.payload};default:return e}};var tK=n(65774),tG=n(39091),t0=n(39593),t1=n(82601);let t2={src:"/_next/static/media/offlinePayments.0a1aad3d.svg"};var t5=n(65581);let t4=e=>{var t,n,i,a,o,s,c,x;let{offlinePaymentOptions:g,placeOrder:j,total_order_amount:v,offlinePaymentLoading:f,usePartialPayment:y}=e,_=(0,G.A)(),w=(0,d.wA)(),C=_.palette.neutral[400],{offlineMethod:b}=(0,d.d4)(e=>e.offlinePayment),{profileInfo:S}=(0,d.d4)(e=>e.profileInfo),D=(0,r.useRouter)(),{orderInformation:T}=(0,d.d4)(e=>e.utilsData),B=tG.Ik().shape({...null==g||null==(n=g.filter(e=>e.method_name===(null==b?void 0:b.method_name))[0])||null==(t=n.method_informations)?void 0:t.reduce((e,t)=>((null==t?void 0:t.is_required)===1&&(e[t.customer_input]=tG.Yj().required("This field is required")),e),{})}),E={customer_note:"",payment_method:b?b.method_name:""};null==g||null==(a=g.filter(e=>e.method_name===(null==b?void 0:b.method_name))[0])||null==(i=a.method_informations)||i.forEach(e=>{E[e.customer_input]=""});let M=(0,t0.Wx)({initialValues:E,validationSchema:B,enableReinitialize:!0,onSubmit:async e=>{try{let t={...e,method_id:b.id};e&&(w((0,Z.aw)(t)),j(),w((0,t5.$$)({...T,...t})))}catch(e){}}}),L=()=>{D.back()};return(0,l.jsxs)(m.jB,{justifyContent:"center",alignItems:"center",paddingInline:{xs:"0px",sm:"60px"},gap:"20px",children:[(0,l.jsx)(A.A,{width:"120px",src:t2.src}),(0,l.jsx)(t1.A,{text:"Pay your bill using any of the payment method below and input the required information in the form"}),(0,l.jsx)(m.jB,{children:(0,l.jsxs)("form",{onSubmit:M.handleSubmit,children:[(0,l.jsxs)(ee.A,{spacing:2,children:[(0,l.jsxs)(z.A,{fullWidth:!0,children:[(0,l.jsx)(I.A,{id:"demo-simple-select-label",sx:{color:e=>e.palette.neutral[1e3]},children:(0,Q.t)("Payment Method")}),(0,l.jsx)(k.A,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:null==b?void 0:b.method_name,label:(0,Q.t)("Payment Method"),onChange:e=>{M.setFieldValue("payment_method",e.target.value);let t=null==g?void 0:g.filter(t=>t.method_name===e.target.value)[0];w((0,Z.JB)(t))},error:!!(M.touched.payment_method&&M.errors.payment_method),helperText:M.touched.payment_method&&M.errors.payment_method,ieldProps:M.getFieldProps("payment_method"),children:(null==g?void 0:g.length)>0&&(null==g?void 0:g.map((e,t)=>(0,l.jsx)(P.A,{value:e.method_name,sx:{"&:hover":{backgroundColor:"primary.main"}},children:(0,Q.t)(e.method_name)},t)))}),M.touched.payment_method&&M.errors.payment_method&&!value&&(0,l.jsx)(tK.A,{sx:{color:e=>e.palette.error.main},children:(0,Q.t)("Please select an option.")})]}),(0,l.jsxs)(m.jB,{padding:"15px",borderRadius:"10px",gap:"15px",backgroundColor:(0,eq.X4)(_.palette.primary.main,.1),children:[(0,l.jsx)(p.A,{fontWeight:500,color:_.palette.primary.main,children:(0,Q.t)("Payment Info")}),(0,l.jsx)(m.jB,{children:(0,l.jsx)(u.Ay,{container:!0,spacing:1,children:null==g||null==(s=g.filter(e=>e.method_name===(null==b?void 0:b.method_name))[0])||null==(o=s.method_fields)?void 0:o.map((e,t)=>(0,l.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,l.jsxs)(p.A,{sx:{textTransform:"capitalize"},children:[e.input_name.replaceAll("_"," "),"\xa0\xa0:\xa0\xa0",(0,l.jsx)(p.A,{component:"span",children:e.input_data})]})},t))})})]}),(0,l.jsx)(p.A,{padding:"20px",varient:"h3",fontSize:"18px",fontWeight:"700",textAlign:"center",children:"Amount: ".concat((0,el.Yi)(y?v-(null==S?void 0:S.wallet_balance):v))}),(0,l.jsxs)(u.Ay,{container:!0,spacing:1,children:[null==g||null==(x=g.filter(e=>e.method_name===(null==b?void 0:b.method_name))[0])||null==(c=x.method_informations)?void 0:c.map((e,t)=>(0,l.jsx)(u.Ay,{item:!0,xs:12,md:6,children:(0,l.jsx)(W.A,{fullWidth:!0,label:null==e?void 0:e.customer_input.replaceAll("_"," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),id:e.customer_input,name:e.customer_input,onChange:M.handleChange,onBlur:M.handleBlur,placeholder:e.customer_placeholder.replaceAll("_"," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),value:M.values[e.customer_input],error:M.touched[e.customer_input]&&!!M.errors[e.customer_input],helperText:M.touched[e.customer_input]&&M.errors[e.customer_input]})},t)),(0,l.jsx)(u.Ay,{item:!0,xs:12,md:12,children:(0,l.jsx)(W.A,{rows:4,multiline:!0,fullWidth:!0,id:"customer_note",label:"Payment Note",name:"customer_note",value:M.values.customer_note,onChange:M.handleChange,onBlur:M.handleBlur})})]})]}),(0,l.jsx)(h.EI,{children:(0,l.jsxs)(ee.A,{direction:"row",width:"100%",spacing:1,justifyContent:{xs:"center",sm:"flex-end"},gap:{xs:"10px",sm:"20px"},paddingTop:{xs:"15px",sm:"20px",md:"25px"},children:[(0,l.jsx)(eA.A,{onClick:()=>L(),sx:{border:"1px solid ".concat(C),borderRadius:"5px",color:C,padding:"8px 16px",width:"100%"},children:(0,Q.t)("Cancel")}),(0,l.jsx)(H.A,{type:"submit",variant:"contained",loading:f,sx:{width:"100%"},children:(0,Q.t)("Place Order")})]})})]})})]})},t3=async e=>{if((0,M.g)()){let{data:t}=await ei.A.get(eo.KT+"?amount="+e);return t}};var t7=n(97861),t8=n(7615);let t6={src:"/_next/static/media/thunderstorm.aafd5f84.svg"},t9=(e,t)=>{if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let n=Object.keys(e),l=Object.keys(t);if(n.length!==l.length)return!1;for(let i of n)if(!l.includes(i)||!t9(e[i],t[i]))return!1;return!0},ne=e=>{var t,n,i,a,r,g,v,f;let{configData:y,router:_,page:w,cartList:C,campaignItemList:b,totalAmount:I}=e,k=(0,S.u)(),P=(0,c.A)(k.breakpoints.down("md")),[W,z]=(0,s.useState)(null!=C&&!!C.length),[T,B]=s.useState(null),[E,L]=(0,s.useState)("delivery"),[N,H]=(0,s.useState)(null),[q,V]=(0,s.useState)(void 0),{couponInfo:X}=(0,d.d4)(e=>e.profileInfo),[Q,$]=(0,s.useState)(""),[K,G]=(0,s.useState)((0,D.IM)(ty.Ec)),[ee,et]=(0,s.useState)(""),[en,el]=(0,s.useState)(null),[ea,eo]=(0,s.useState)("now"),[es,ec]=(0,s.useState)(!1),[eu,ep]=(0,s.useState)(0),[ex,em]=(0,s.useState)(0),[eh,eg]=(0,s.useState)(0),[ey,eA]=(0,s.useState)(0),[ew,eC]=(0,s.useState)([]),[eb,eS]=(0,s.useState)(0),[eI,ez]=(0,s.useState)(null),[eD,eT]=(0,s.useState)(null),[eB,eE]=(0,s.useState)(!1),[eM,eL]=(0,s.useState)(!1),[eF,eR]=(0,s.useState)(!1),[eO,eY]=(0,s.useState)(!1),[eH,eV]=(0,s.useState)(""),[eZ,eX]=(0,s.useState)(!1),[eU,eQ]=(0,s.useState)(null),[e$,eG]=(0,s.useState)(!1),[e0,e1]=(0,s.useState)(0),[e2,e5]=(0,s.useState)(""),[e4,e3]=(0,s.useReducer)(t$,tQ),{profileInfo:e7}=(0,d.d4)(e=>e.profileInfo),{guestUserInfo:e8}=(0,d.d4)(e=>e.guestUserInfo),{offlinePaymentInfo:e6}=(0,d.d4)(e=>e.offlinePayment),[e9,te]=(0,s.useState)(null),tt=(0,M.g)(),tn=(0,d.wA)(),{t:tl}=(0,x.Bd)(),ti=(0,M.W)(),{method:ta}=_.query,tr=(0,t0.Wx)({initialValues:{password:"",confirm_password:""},validationSchema:tG.Ik({password:tG.Yj().required(tl("Password is required")).min(6,tl("Password is too short - should be 6 chars minimum.")),confirm_password:tG.Yj().required(tl("Confirm Password")).oneOf([tG.KR("password"),null],tl("Passwords must match"))})}),ts=(0,tj.c)(),tc="campaign"===w?null==b||null==(t=b[0])?void 0:t.store_id:null==C||null==(n=C[0])?void 0:n.store_id,{data:tp,refetch:tx}=(0,R.A)(tc),{data:th}=td(),{mutate:t_,isLoading:tC}=tg(),{data:tb,refetch:tS,isLoading:tI}=tA(),{mutate:tk,data:tW}=tu();(0,s.useEffect)(()=>{tS()},[]),(0,s.useEffect)(()=>{tc&&tx()},[tc]);let tz=JSON.parse(window.localStorage.getItem("currentLatLng")),{data:tT}=(0,O.useQuery)(["zoneId",location],async()=>Y.k.getZoneId(tz),{retry:1}),{data:tB,refetch:tE,isLoading:tM}=(0,O.useQuery)(["get-distancesss",tp,q,E],()=>Y.k.distanceApi(tp,q),{enabled:!0,onError:U.Jm});console.log({distanceData:tB});let tL=(0,D.gf)(null==tB?void 0:tB.data,{latitude:null==tp?void 0:tp.latitude,longitude:null==tp?void 0:tp.longitude},q);(0,s.useEffect)(()=>{var e;te(Number(null==tB||null==(e=tB.data)?void 0:e.distanceMeters)/1e3)},[tB]),console.log({tempDistance:tL,dDistance:e9});let{data:tF,isLoading:tR,refetch:tY}=er({tempDistance:tL});(0,s.useEffect)(()=>{tB&&tY()},[tB]);let{mutate:tH,isLoading:tq}=(0,O.useMutation)("order-place",ej.X.placeOrder),{isLoading:tV,data:tX}=(0,O.useQuery)(["profile-info"],tm.i.profileInfo,{onSuccess:e=>{},onError:U.P1});console.log({dDistance:e9}),(0,s.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("currentLatLng")),t=localStorage.getItem("location");V({...e,latitude:null==e?void 0:e.lat,longitude:null==e?void 0:e.lng,address:t,address_type:"Selected Address"}),tx()},[]),(0,s.useEffect)(()=>{ep((0,D.hJ)(C,en,null==tp?void 0:tp.tax,tp))},[C,en,tp]),(0,s.useEffect)(()=>{em((0,D.uh)(C,en,eu,tp))},[C,en,eu]);let tJ=()=>{let e={...e6,order_id:eH,guest_id:ti};tn((0,Z.im)(3)),tn((0,Z.s0)(!0)),t_(e)};(0,s.useEffect)(()=>{eZ&&tJ()},[eH]);let tK=(e,t)=>null==e?void 0:e.map(e=>{var t,n,l,i,a,r,o,s,d;return{add_on_ids:(null==e||null==(t=e.selectedAddons)?void 0:t.length)>0?null==e||null==(n=e.selectedAddons)?void 0:n.map(e=>e.id):[],add_on_qtys:(null==e||null==(l=e.selectedAddons)?void 0:l.length)>0?null==e||null==(i=e.selectedAddons)?void 0:i.map(e=>e.quantity):[],add_ons:(null==e||null==(a=e.selectedAddons)?void 0:a.length)>0?null==e||null==(r=e.selectedAddons)?void 0:r.map(e=>({id:e.id,name:e.name,price:e.price})):[],item_id:null==e?void 0:e.id,item_campaign_id:(null==e?void 0:e.available_date_starts)?null==e?void 0:e.id:null,item_type:(null==e?void 0:e.available_date_starts)?"AppModelsItemCampaign":"AppModelsItem",price:null==e?void 0:e.price,quantity:null==e?void 0:e.quantity,variant:(null==e?void 0:e.module_type)==="food"?(0,D._8)(null==e?void 0:e.variation):[],variation:(null==e?void 0:e.module_type)==="food"?(null==e||null==(o=e.food_variations)?void 0:o.length)>0?null==e||null==(s=e.food_variations)?void 0:s.map(e=>({name:e.name,values:{label:(0,tw.H9)(e.values)}})):[]:(null==e||null==(d=e.selectedOption)?void 0:d.length)>0?null==e?void 0:e.selectedOption:[]}});console.log({distanceData:tB});let t1=(e,t)=>{let n=(0,M.g)()?"":ti,l="cash_on_delivery"!==Q&&"wallet"!==Q&&"offline_payment"!==Q&&""!==Q?"digital_payment":Q,i={latitude:null==tp?void 0:tp.latitude,longitude:null==tp?void 0:tp.longitude};if("pharmacy"!==(0,tj.c)())return console.log("vvv",(0,D.gf)(tB,i,q),tB),{cart:JSON.stringify(e),...q,is_buy_now:+("buy_now"===w||"campaign"===w),partial_payment:eB,schedule_at:"now"===ea?null:ea,payment_method:l,order_type:"schedule_order"===E?"delivery":E,store_id:tc,coupon_code:null==en?void 0:en.code,coupon_discount_amount:null==en?void 0:en.discount,coupon_discount_title:null==en?void 0:en.title,discount_amount:(0,D.fT)(t),distance:e9||tL,order_amount:I,dm_tips:eh,cutlery:eb,unavailable_item_note:eI,delivery_instruction:eD,guest_id:n,contact_person_name:tt?(null==q?void 0:q.contact_person_name)?null==q?void 0:q.contact_person_name:null==e7?void 0:e7.name:null==e8?void 0:e8.contact_person_name,contact_person_number:(0,D.n4)(tt?(null==q?void 0:q.contact_person_number)?null==q?void 0:q.contact_person_number:null==e7?void 0:e7.phone:"".concat(null==e8?void 0:e8.contact_person_number)),contact_person_email:null==e8?void 0:e8.contact_person_email,house:tt?null==q?void 0:q.house:null==e8?void 0:e8.house,floor:tt?null==q?void 0:q.floor:null==e8?void 0:e8.floor,road:tt?null==q?void 0:q.road:null==e8?void 0:e8.road,extra_packaging_amount:e0>0?e0:0,create_new_user:+!!T,password:tr.values.password,is_guest:+!tt};{let a=new FormData;return a.append("cart",JSON.stringify(e)),"now"!==ea&&a.append("schedule_at",ea),a.append("payment_method",l),a.append("order_type",E),a.append("store_id",null==tp?void 0:tp.id),(null==en?void 0:en.code)&&a.append("coupon_code",null==en?void 0:en.code),a.append("coupon_discount_amount",null==en?void 0:en.discount),a.append("coupon_discount_title",null==en?void 0:en.title),a.append("discount_amount",(0,D.fT)(t)),a.append("distance",(0,D.gf)(null==tB?void 0:tB.data,i,q)),a.append("order_amount",I),a.append("dm_tips",eh),a.append("address",null==q?void 0:q.address),a.append("address_type",null==q?void 0:q.address_type),a.append("lat",null==q?void 0:q.lat),a.append("latitude",null==q?void 0:q.latitude),a.append("lng",null==q?void 0:q.lng),a.append("longitude",null==q?void 0:q.longitude),a.append("guest_id",n),a.append("is_buy_now",+("buy_now"===w||"campaign"===w)),a.append("house",tt?null==q?void 0:q.house:null==e8?void 0:e8.house),a.append("floor",tt?null==q?void 0:q.floor:null==e8?void 0:e8.floor),a.append("road",tt?null==q?void 0:q.road:null==e8?void 0:e8.road),a.append("contact_person_name",null==e8?void 0:e8.contact_person_name),a.append("contact_person_number",tt?(null==q?void 0:q.contact_person_number)?null==q?void 0:q.contact_person_number:null==e7?void 0:e7.phone:"+".concat(null==e8?void 0:e8.contact_person_number)),a.append("contact_person_email",null==e8?void 0:e8.contact_person_email),(null==ew?void 0:ew.length)>0&&(null==ew||ew.forEach(e=>a.append("order_attachment",e))),a.append("extra_packaging_amount",e0>0?e0:0),a.append("create_new_user",+!!T),a.append("is_guest",+!tt),a.append("password",tr.values.password),a}},t2=(0,s.useRef)(null),ne=(0,s.useRef)(null);(0,s.useEffect)(()=>{if((!C||!tp)&&!tc)return;let e=!t9(t2.current,C),t=!t9(ne.current,en);if(e||t){t2.current=C,ne.current=en;let e="campaign"===w?b:C,t=t1(tK(e,0),e);console.log({orderObject:t}),tk(t,{})}},[C,b,en,tp]);let nt=()=>{let e="campaign"===w?b:C;if(null==tp||!tp.schedule_order||(0,tj.c)()!==t7.A.FOOD||(0,D.Mp)(e,ea)){var t;let e=null==tX||null==(t=tX.data)?void 0:t.wallet_balance,n="campaign"===w?b:C;if("wallet"===Q)if(Number(e)<Number(I))ev.oR.error(tl("Wallet balance is below total amount."),{id:"wallet",position:"bottom-right"});else{let e=tK(n,0);(null==e?void 0:e.length)>0&&tH(t1(e,n),{onSuccess:e=>{if(null==e?void 0:e.data){var t,n,l,i,a,r,s,d;if(tt&&tn((0,Z.s0)(!0)),"digital_payment"===Q){ev.oR.success(null==e||null==(t=e.data)?void 0:t.message);let s=ei.p,d=tt?"".concat(window.location.origin,"/profile?page=").concat("my-orders"):"".concat(window.location.origin,"/order?order_id=").concat(null==e||null==(n=e.data)?void 0:n.order_id,"&total=").concat(null==e||null==(l=e.data)?void 0:l.total_ammount),c="".concat(s,"/payment-mobile?order_id=").concat(null==e||null==(i=e.data)?void 0:i.order_id,"&customer_id=").concat(null!=(r=null==tX||null==(a=tX.data)?void 0:a.id)?r:ti,"&callback=").concat(d,",");localStorage.setItem("totalAmount",I),tn((0,tf.gG)()),o().push(c)}else"wallet"===Q?(ev.oR.success(null==e||null==(s=e.data)?void 0:s.message),eV(null==e||null==(d=e.data)?void 0:d.order_id),ec(!0)):203===e.status&&ev.oR.error(e.data.errors[0].message)}},onError:e=>{var t,n,l;null==e||null==(l=e.response)||null==(n=l.data)||null==(t=n.errors)||t.forEach(e=>ev.oR.error(e.message,{position:"bottom-right"}))}})}else{let e=tK(n,0);if((null==e?void 0:e.length)>0){let t=t1(e,n);console.log({order:t}),tH(t,{onSuccess:e=>{if(null==e?void 0:e.data){var t,n,l,i,a,r,s,d,c;if(tt?tn((0,Z.s0)(!0)):(tn((0,t8.ni)(null==e||null==(t=e.data)?void 0:t.order_id)),tn((0,t5.$$)(null==e?void 0:e.data)),tn((0,t5.s0)(!0)),tn((0,t8.iv)(null))),("cash_on_delivery"===Q||"offline_payment"===Q||"wallet"===Q)&&ev.oR.success(null==e||null==(n=e.data)?void 0:n.message,{id:Q}),"cash_on_delivery"!==Q&&"offline_payment"!==Q){let t=tt?"".concat(window.location.origin,"/profile?page=").concat("my-orders"):"".concat(window.location.origin,"/home"),n="".concat(ei.p,"/payment-mobile?order_id=").concat(null==e||null==(l=e.data)?void 0:l.order_id,"&customer_id=").concat((null!=(s=null==tX||null==(i=tX.data)?void 0:i.id)?s:null==e||null==(a=e.data)?void 0:a.user_id)?null==e||null==(r=e.data)?void 0:r.user_id:ti,"&payment_platform=").concat("web","&callback=").concat(t,"&payment_method=").concat(Q);localStorage.setItem("totalAmount",I),tn((0,t8.iv)(null)),o().push(n,void 0,{shallow:!0})}else"offline_payment"===Q?(eV(null==e||null==(d=e.data)?void 0:d.order_id),tn((0,t5.$$)(null==e?void 0:e.data)),ec(!0),eX(!0)):(eV(null==e||null==(c=e.data)?void 0:c.order_id),tn((0,t5.$$)(null==e?void 0:e.data)),ec(!0))}},onError:e=>{var t,n,l;null==e||null==(l=e.response)||null==(n=l.data)||null==(t=n.errors)||t.forEach(e=>ev.oR.error(e.message,{position:"bottom-right"}))}})}}}else ev.oR.error(tl("One or more item is not available for the chosen preferable schedule time."))},nn=()=>ev.oR.error(tl("".concat((0,tv.E)().slice(0,-1)," is closed. Try again later."))),nl=()=>{var e,t;let n=null==(t=(0,D.h4)(tT))||null==(e=t.pivot)?void 0:e.maximum_cod_order_amount;"take_away"===E?nt():n?I<=n?nt():ev.oR.error(tl(ef.zK),{duration:5e3}):nt()},ni=()=>{if((null==tp?void 0:tp.schedules.length)>0){let e=ed()().weekday(),t=!1,n=null==tp?void 0:tp.schedules.filter(t=>t.day===e),l=[];return n.forEach(e=>{(0,D.e2)(null==e?void 0:e.opening_time,null==e?void 0:e.closing_time)&&l.push(e)}),l.length>0}},na=()=>{(null==tp?void 0:tp.active)&&ni()?nl():nn()};(0,s.useEffect)(()=>{es&&nr()},[es]);let nr=()=>{"buysetScheduleAt_now"===w&&tn((0,tf.Kn)(null==C?void 0:C[0])),localStorage.setItem("totalAmount",I),tt?o().push({pathname:"/profile",query:{orderId:eH,page:"my-orders",from:"checkout"}},void 0,{shallow:!1}):o().push("/home")},no=()=>{if((null==y?void 0:y.partial_payment_status)===1){var e,t,n,l,i,a;en&&eB?N>(null==tX||null==(e=tX.data)?void 0:e.wallet_balance)&&!eB?eY(!0):eB&&(null==tX||null==(t=tX.data)?void 0:t.wallet_balance)>N&&eR(!0):eh>0&&eB||eM?N>(null==tX||null==(n=tX.data)?void 0:n.wallet_balance)?eY(!0):eB&&(null==tX||null==(l=tX.data)?void 0:l.wallet_balance)>N&&eR(!0):E&&eB&&(N>(null==tX||null==(i=tX.data)?void 0:i.wallet_balance)&&!eB?eY(!0):eB&&(null==tX||null==(a=tX.data)?void 0:a.wallet_balance)>N&&eR(!0))}},{refetch:ns}=function(e){let{amount:t,handleSuccess:n}=e;return(0,O.useQuery)("cashback",()=>t3(t),{enabled:!1,onSuccess:n,onError:U.P1})}({amount:N,handleSuccess:e=>{eQ(e)}});(0,s.useEffect)(()=>{no(),N>0&&ns()},[N]),(0,s.useEffect)(()=>{"wallet"!==Q&&eL(!1)},[Q]),(0,s.useEffect)(()=>{e$?e1(null==tp?void 0:tp.extra_packaging_amount):e1(0)},[e$]);let nd=(0,D.e5)(null==tp?void 0:tp.zone_id,null==tT?void 0:tT.data),nc=()=>{var e,t,n;!(null==y?void 0:y.cash_on_delivery)&&(null==y?void 0:y.customer_wallet_status)!==1&&(null==y?void 0:y.offline_payment_status)!==1&&(null==y?void 0:y.digital_payment)&&(null==y||null==(e=y.active_payment_method_list)?void 0:e.length)===1&&(null==nd?void 0:nd.digital_payment)&&($(null==y||null==(t=y.active_payment_method_list[0])?void 0:t.gateway),e5(null==y||null==(n=y.active_payment_method_list[0])?void 0:n.gateway_image_full_url))};return(0,s.useEffect)(()=>{nc()},[y,nd]),(0,l.jsx)(l.Fragment,{children:"offline"===ta?(0,l.jsx)(u.Ay,{container:!0,mb:"2rem",paddingTop:{xs:"1.5rem",md:"2.5rem"},children:(0,l.jsxs)(u.Ay,{item:!0,xs:12,md:12,children:[(0,l.jsx)(eN,{}),(0,l.jsx)(m.jB,{marginTop:{xs:"1.5rem",md:"2.5rem"},alignItems:"center",children:(0,l.jsx)(m.WU,{sx:{width:{xs:"100%",sm:"90%",md:"80%"}},children:(0,l.jsx)(t4,{offlinePaymentOptions:tb,total_order_amount:N,placeOrder:na,offlinePaymentLoading:tC||tq,usePartialPayment:eB})})})]})}):(0,l.jsxs)(u.Ay,{container:!0,spacing:3,mb:"2rem",paddingTop:{xs:"1.5rem",md:"2.5rem"},children:[(0,l.jsx)(u.Ay,{item:!0,xs:12,md:7,children:(0,l.jsxs)(j.A,{spacing:{xs:2,sm:2,md:3},pb:{xs:"1rem",sm:"2rem",md:"4rem"},children:[(0,l.jsx)(eN,{}),tT&&(0,l.jsx)(to,{setPaymentMethod:$,paymentMethod:Q,zoneData:tT,configData:y,orderType:E,usePartialPayment:eB,offlinePaymentOptions:tb,setSwitchToWallet:eL,isZoneDigital:nd,setPaymentMethodImage:e5,paymentMethodImage:e2,remainingBalance:(null==tX||null==(i=tX.data)?void 0:i.wallet_balance)-N,handlePartialPayment:()=>{var e;N>(null==tX||null==(e=tX.data)?void 0:e.wallet_balance)?(eE(!0),$("")):($("wallet"),eL(!0)),tn((0,Z.JB)(""))},walletBalance:null==tX||null==(a=tX.data)?void 0:a.wallet_balance,removePartialPayment:()=>{var e;N>(null==tX||null==(e=tX.data)?void 0:e.wallet_balance)?(eE(!1),$("")):($(""),eL(!1)),tn((0,Z.JB)(""))},switchToWallet:eM,customerData:tX,payableAmount:N}),(0,l.jsx)(F,{storeData:tp,setOrderType:L,orderType:E,setAddress:V,address:q,customDispatch:e3,scheduleTime:e4.scheduleTime,setDayNumber:G,setDeliveryTip:eg,handleChange:e=>{G(e.target.value)},today:ty.Ec,tomorrow:ty.uf,numberOfDay:K,configData:y,setScheduleAt:eo,formik:tr,passwordHandler:e=>{tr.setFieldValue("password",e)},confirmPasswordHandler:e=>{tr.setFieldValue("confirm_password",e)},check:T,setCheck:B,isHomeDelivery:null==y?void 0:y.home_delivery_status}),1===Number.parseInt(null==y?void 0:y.dm_tips_status)&&"take_away"!==E&&(0,l.jsx)(e_,{orderType:E,deliveryTip:eh,setDeliveryTip:eg,isSmall:P,tripsData:th,setUsePartialPayment:eE}),(0,l.jsx)(u.Ay,{item:!0,md:12,xs:12})]})}),(0,l.jsx)(u.Ay,{item:!0,xs:12,md:5,height:"auto",children:(0,l.jsxs)(m.jB,{children:["pharmacy"===ts&&(0,l.jsx)(m.WU,{sx:{marginBottom:"1rem"},padding:P?"0px":"1.25rem",noboxshadow:P&&"true",backgroundcolor:P&&k.palette.background.default,children:(0,l.jsx)(tP,{t:tl,handleImageUpload:e=>{eC([e])},borderRadius:"10px"})}),(0,l.jsx)(m.WU,{height:"auto",padding:P?"0px":"1.25rem",noboxshadow:P&&"true",backgroundcolor:P&&k.palette.background.default,children:(0,l.jsxs)(j.A,{justifyContent:"space-between",children:[(0,l.jsx)(h.t1,{textAlign:"left",children:tl("Order Summary")}),tT&&(e=>{let t=null==e?void 0:e.find(e=>e.id===(null==tp?void 0:tp.zone_id));if(t&&(null==t?void 0:t.increased_delivery_fee_status)===1)return(0,l.jsx)(l.Fragment,{children:(null==t?void 0:t.increase_delivery_charge_message)&&(0,l.jsxs)(m.jB,{alignItems:"center",justifyContent:"flex-start",gap:"10px",direction:"row",mt:"10px",sx:{backgroundColor:e=>(0,eq.X4)(e.palette.primary.main,.3),borderRadius:"4px",padding:"5px 10px"},children:[(0,l.jsx)(A.A,{height:"40px",width:"40px",src:t6.src,objectFit:"contained"}),(0,l.jsx)(p.A,{children:null==t?void 0:t.increase_delivery_charge_message})]})})})(null==tT||null==(r=tT.data)?void 0:r.zone_data),(0,l.jsx)(eK.A,{style:{maxHeight:"500px",width:"100%"},children:(0,l.jsx)(tZ,{page:w,configData:y,cartList:C,t:tl,campaignItemList:b,isSmall:P})}),tp&&tt&&(0,l.jsx)(tO,{store_id:null==tp?void 0:tp.id,setCouponDiscount:el,counponRemove:()=>{},couponDiscount:en,totalAmount:I,deliveryFee:ey,deliveryTip:eh,setSwitchToWallet:eL,walletBalance:null==tX||null==(g=tX.data)?void 0:g.wallet_balance,payableAmount:N,min_order_amount:null==tp?void 0:tp.minimum_order}),"food"===(0,tj.c)()&&(null==tp?void 0:tp.cutlery)&&(0,l.jsx)(tD,{isChecked:eb,handleChange:e=>{eS(1)}}),(0,l.jsx)(ek,{title:"If Any Product is not available",data:eP,handleChange:e=>{ez(e)}}),(0,l.jsx)(ek,{title:"Add More Delivery Instruction",data:eW,handleChange:e=>{eT(e)}}),(0,l.jsx)(tN,{usePartialPayment:eB,cartList:"campaign"===w?b:C,storeData:tp,couponDiscount:en,taxAmount:tW,distanceData:tB,total_order_amount:ex,configData:y,couponInfo:X,orderType:E,deliveryTip:eh,origin:{latitude:null==tp?void 0:tp.latitude,longitude:null==tp?void 0:tp.longitude},destination:q,zoneData:tT,extraCharge:tF&&tF,setDeliveryFee:eA,extraChargeLoading:tR,walletBalance:null==tX||null==(v=tX.data)?void 0:v.wallet_balance,setPayableAmount:H,additionalCharge:(null==y?void 0:y.additional_charge_status)===1&&(null==y?void 0:y.additional_charge),payableAmount:N,cashbackAmount:eU,handleExtraPackaging:e=>{eG(e.target.checked)},isPackaging:e$,packagingCharge:e0,customerData:tX,initVauleEx:null==tp?void 0:tp.extra_packaging_amount,isLoading:tM,scheduleAt:ea}),(0,l.jsx)(J,{placeOrder:na,orderLoading:tq,zoneData:tT,storeData:tp,isSchedules:ni,storeCloseToast:nn,page:w,isLoading:tM})]})})]})}),eF&&(0,l.jsx)(eJ.A,{openModal:eF,children:(0,l.jsx)(tU,{payableAmount:N,agree:()=>{$("wallet"),eL(!0),eE(!1),eR(!1)},reject:()=>{$(""),eL(!1),eE(!1),eR(!1)},colorTitle:" Want to pay via your wallet ? ",title:"You can pay the full amount with your wallet.",remainingBalance:(null==tX||null==(f=tX.data)?void 0:f.wallet_balance)-N})}),eO&&(0,l.jsx)(eJ.A,{openModal:eO,children:(0,l.jsx)(tU,{payableAmount:N,agree:()=>{$(""),eE(!0),eY(!1),eL(!1)},reject:()=>{eE(!1),eY(!1),eL(!1)},colorTitle:" Want to pay partially with wallet ? ",title:"You do not have sufficient balance to pay full amount via wallet."})})]})})};ne.propTypes={};let nt={src:"/_next/static/media/modalimage.3b69a18e.svg"};var nn=n(30469),nl=n(48121),ni=n(263);let na=e=>{let{title:t,name:n,phone:i,address:a,houseNumber:r,floor:o,roadNumber:s}=e,d=(0,G.A)();return(0,l.jsxs)(m.jB,{spacing:.5,children:[(0,l.jsx)(j.A,{width:"100%",children:(0,l.jsx)(p.A,{fontWeight:"500",children:t})}),(0,l.jsxs)(j.A,{width:"100%",padding:".9rem",backgroundColor:d.palette.neutral[300],borderRadius:"7px",spacing:.5,children:[(0,l.jsx)(p.A,{children:n}),(0,l.jsxs)(j.A,{direction:"row",spacing:1.3,alignItems:"center",children:[(0,l.jsx)(nl.A,{sx:{width:"14.5px",height:"14.5px",color:e=>e.palette.primary.main}}),(0,l.jsx)(p.A,{fontSize:"12px",color:d.palette.neutral[500],children:i})]}),(0,l.jsxs)(j.A,{direction:"row",spacing:1.3,alignItems:"center",children:[(0,l.jsx)(ni.A,{sx:{width:"14.5px",height:"14.5px",color:e=>e.palette.primary.main}}),(0,l.jsx)(p.A,{fontSize:"12px",color:d.palette.neutral[500],children:a})]}),(0,l.jsxs)(p.A,{fontSize:"12px",color:d.palette.neutral[500],children:[s&&"Road: ".concat(s," "),r&&"House: ".concat(r," "),o&&"Floor: ".concat(o)]})]})]})};var nr=n(82591),no=n(62936);let ns=e=>{var t;let{setOpenModal:n,deliveryInstruction:i,setCustomerInstruction:a,customNote:r,setCustomNote:o,selectedInstruction:d,setSelectedInstruction:c}=e,{t:u}=(0,x.Bd)(),h=(0,G.A)(),[g,j]=(0,s.useState)(!1),[v,f]=(0,s.useState)("");return(0,l.jsxs)(m.jB,{justifyContent:"center",padding:{xs:"30px 20px",sm:"30px 30px"},gap:"10px",minWidth:{xs:"300px",md:"500px"},children:[(null==i?void 0:i.data.length)>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(p.A,{fontSize:{xs:"14px",sm:"16px",md:"18px"},fontWeight:600,variant:"h6",children:u("Choose Delivery Instructions")}),(0,l.jsx)(ee.A,{padding:"5px 10px",children:(0,l.jsx)(z.A,{component:"fieldset",children:(0,l.jsx)(eQ.A,{value:d,onChange:e=>{c(e.target.value)},children:null==i?void 0:i.data.map(e=>(0,l.jsx)(ee.A,{padding:"5px 0px",children:(0,l.jsx)(w.A,{value:e.instruction,control:(0,l.jsx)(e$.A,{}),label:e.instruction,sx:{border:"1px solid ".concat((0,eq.X4)(h.palette.neutral[500],.1)),borderRadius:"10px",paddingBlock:"5px",marginRight:"-11px",paddingInlineEnd:"1rem","& .MuiFormControlLabel-label":{color:d===e.instruction?e=>e.palette.neutral[1e3]:(0,eq.X4)(h.palette.neutral[500],.8),fontWeight:d===e.instruction?"500":"400",fontSize:"14px"}}})},e.id))})})})]}):null,(0,l.jsx)(p.A,{fontSize:{xs:"14px",sm:"16px",md:"18px"},fontWeight:600,variant:"h6",children:u((null==i||null==(t=i.data)?void 0:t.length)>0?"Or Add Custom Note":"Add Custom Note")}),(0,l.jsx)(W.A,{rows:4,multiline:!0,value:v,fullWidth:!0,placeholder:"Please write a note",id:"custom_note",name:"custom_note",onChange:e=>{let t=e.target.value;t.length<266?(f(t),j(!1)):j(!0)}}),g&&(0,l.jsxs)(ee.A,{flexDirection:"row",alignItems:"center",gap:"5px",children:[(0,l.jsx)(no.A,{fontSize:"10px",color:"error"}),(0,l.jsx)(p.A,{color:h.palette.error.main,children:u("Note must not be grater than 191 characters")})]}),(0,l.jsx)(eA.A,{sx:{marginTop:"1rem"},type:"submit",fullWidth:!0,variant:"contained",onClick:()=>{o(v),d?""!==r?a("".concat(d," ( ").concat(r," )")):a("".concat(d)):a("".concat(r)),n(!1)},children:u("Apply")})]})},nd=e=>{let{configData:t,deliveryInstruction:n,customerInstruction:i,setCustomerInstruction:a,setCheck:r,check:o,formik:c,confirmPasswordHandler:h,passwordHandler:g}=e,j=(0,G.A)(),{t:v}=(0,x.Bd)(),[f,y]=(0,s.useState)(!1),[_,S]=(0,s.useState)(null),[I,k]=(0,s.useState)(""),P=(0,M.g)(),{parcelInfo:W}=(0,d.d4)(e=>e.parcelInfoData),z=()=>{y(!f)},D=e=>{r(e.target.checked)};return(0,l.jsx)(m.WU,{children:(0,l.jsxs)(m.jB,{spacing:3,children:[(0,l.jsx)(ee.A,{align:"center",children:(0,l.jsx)(p.A,{fontWeight:500,fontSize:"16px",children:v("Delivery Information")})}),(0,l.jsx)(na,{title:v("Sender"),phone:P?null==W?void 0:W.senderPhone:"+ ".concat(null==W?void 0:W.senderPhone),name:null==W?void 0:W.senderName,address:null==W?void 0:W.senderAddress,houseNumber:null==W?void 0:W.senderFloor,floor:null==W?void 0:W.senderFloor,roadNumber:null==W?void 0:W.senderRoad}),!(0,M.g)()&&(0,l.jsxs)(ee.A,{children:[(0,l.jsx)(ee.A,{children:(0,l.jsx)(w.A,{onChange:e=>D(e),control:(0,l.jsx)(C.A,{}),label:(0,l.jsx)(p.A,{fontWeight:"500",fontSize:"14px",children:v("Create account with exiting info.")})})}),o&&(0,l.jsxs)(u.Ay,{container:!0,spacing:3,pt:"10px",children:[(0,l.jsx)(u.Ay,{item:!0,sm:12,md:12,children:(0,l.jsx)(E.A,{required:"true",type:"password",label:v("Password"),placeholder:v("Password"),touched:c.touched.password,errors:c.errors.password,fieldProps:c.getFieldProps("password"),onChangeHandler:g,value:c.values.password,startIcon:(0,l.jsx)(b.A,{position:"start",children:(0,l.jsx)(L.A,{sx:{color:e=>e.palette.neutral[400]}})})})}),(0,l.jsx)(u.Ay,{item:!0,sm:12,md:12,children:(0,l.jsx)(E.A,{label:v("Confirm Password"),required:"true",type:"password",placeholder:v("Confirm Password"),touched:c.touched.confirm_password,errors:c.errors.confirm_password,fieldProps:c.getFieldProps("confirm_password"),onChangeHandler:h,value:c.values.confirm_password,startIcon:(0,l.jsx)(b.A,{position:"start",children:(0,l.jsx)(L.A,{sx:{color:e=>e.palette.neutral[400]}})})})})]})]}),(0,l.jsx)(na,{title:v("Receiver"),phone:"+ ".concat(null==W?void 0:W.receiverPhone),name:null==W?void 0:W.receiverName,address:null==W?void 0:W.receiverAddress,houseNumber:null==W?void 0:W.house,floor:null==W?void 0:W.floor,roadNumber:null==W?void 0:W.road}),(0,l.jsxs)(m.jB,{spacing:.5,children:[(0,l.jsx)(ee.A,{width:"100%",children:(0,l.jsx)(p.A,{fontWeight:"500",children:v("Parcel Category")})}),(0,l.jsxs)(ee.A,{width:"100%",padding:"1.3rem",backgroundColor:j.palette.neutral[300],borderRadius:"7px",spacing:2,direction:"row",alignItems:"center",children:[(0,l.jsx)(A.A,{width:"50px",height:"50px",src:null==W?void 0:W.image,objectfit:"contain"}),(0,l.jsxs)(ee.A,{children:[(0,l.jsx)(p.A,{fontSize:{xs:"14px",sm:"16px",md:"16px"},fontWeight:"500",children:null==W?void 0:W.name}),(0,l.jsx)(p.A,{color:j.palette.neutral[500],fontSize:"12px",children:null==W?void 0:W.description})]})]})]}),(0,l.jsxs)(m.jB,{children:[(0,l.jsxs)(ee.A,{flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[(0,l.jsx)(p.A,{fontSize:"16px",fontWeight:"500",children:v("Add More Delivery Instruction")}),_?(0,l.jsx)(eZ.A,{children:(0,l.jsx)(eX.A,{sx:{color:e=>e.palette.primary.main},fontSize:"medium",onClick:z})}):(0,l.jsx)(eZ.A,{children:(0,l.jsx)(nr.A,{fontSize:"medium",onClick:z})})]}),(0,l.jsxs)(ee.A,{children:[i&&(0,l.jsx)(ee.A,{direction:"row",gap:"10px",justifyContent:"flex-start",sx:{backgroundColor:e=>e.palette.neutral[300],padding:"8px 10px",borderRadius:"8px"},children:(0,l.jsxs)(ee.A,{gap:"10px",direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",children:[(0,l.jsx)(p.A,{fontSize:"12px",fontWeight:400,children:_}),(0,l.jsx)(ee.A,{justifyContent:"flex-end",alignItems:"end",sx:{cursor:"pointer"},children:(0,l.jsx)(ey.A,{sx:{width:"20px",height:"20px",fontWeight:"700"},onClick:()=>{a(null),S(null)}})})]})}),I&&(0,l.jsxs)(ee.A,{gap:"10px",direction:"row",alignItems:"center",justifyContent:"space-between",width:"100%",sx:{backgroundColor:e=>e.palette.neutral[300],padding:"8px 10px",borderRadius:"8px"},marginTop:"10px",children:[(0,l.jsxs)(ee.A,{children:[(0,l.jsx)(p.A,{fontSize:"12px",fontWeight:600,children:"Note:"}),(0,l.jsx)(p.A,{fontSize:"12px",fontWeight:400,color:(0,eq.X4)(j.palette.neutral[600],.7),children:I})]}),(0,l.jsx)(ee.A,{justifyContent:"flex-end",alignItems:"end",sx:{cursor:"pointer"},children:(0,l.jsx)(ey.A,{sx:{width:"20px",height:"20px",fontWeight:"700"},onClick:()=>{k("")}})})]})]}),(0,l.jsxs)(eJ.A,{openModal:f,handleClose:()=>y(!1),children:[(0,l.jsx)(m.jB,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{position:"relative"},children:(0,l.jsx)(eZ.A,{onClick:()=>y(!1),sx:{zIndex:"99",position:"absolute",top:0,right:0,backgroundColor:e=>e.palette.neutral[100],borderRadius:"50%",[j.breakpoints.down("md")]:{top:10,right:5}},children:(0,l.jsx)(ey.A,{sx:{fontSize:"20px",fontWeight:"700"}})})}),(0,l.jsx)(ns,{setOpenModal:y,deliveryInstruction:n,setCustomerInstruction:a,selectedInstruction:_,setSelectedInstruction:S,customNote:I,setCustomNote:k})]})]})]})})},nc={src:"/_next/static/media/distance.3b40ad3a.png"},nu={src:"/_next/static/media/fee.987d8c79.png"},np=e=>{var t;let{data:n,parcelDeliveryFree:i,senderLocation:a,receiverLocation:r,configData:o,extraChargeLoading:s}=e,d=(0,G.A)();return(0,l.jsxs)(m.jB,{justifyContent:"center",alignItems:"center",direction:"row",spacing:4,children:[(0,l.jsxs)(j.A,{direction:"row",width:"100%",spacing:1.5,children:[(0,l.jsx)(A.A,{src:nc.src,width:"37px",height:"37px",objectfit:"contain"}),(0,l.jsxs)(j.A,{children:[(0,l.jsx)(p.A,{color:d.palette.neutral[1e3],children:(0,Q.t)("Distance")}),n?(0,l.jsxs)(p.A,{color:d.palette.primary.main,fontWeight:"600",children:[null==(t=(0,D.gf)(n,a,r))?void 0:t.toFixed(null==o?void 0:o.digit_after_decimal_point)," ","km"]}):(0,l.jsx)($.A,{width:50,height:20,variant:"text"})]})]}),(0,l.jsxs)(j.A,{direction:"row",width:"100%",spacing:1.5,children:[(0,l.jsx)(A.A,{src:nu.src,width:"37px",height:"37px",objectfit:"contain"}),(0,l.jsxs)(j.A,{flexWrap:"wrap",children:[(0,l.jsx)(p.A,{children:(0,Q.t)("Delivery Fee")}),s?(0,l.jsx)($.A,{width:"30px",height:"10px",variant:"rectangular"}):(0,l.jsx)(p.A,{color:d.palette.primary.main,fontWeight:"600",children:(0,el.Yi)(i())})]})]})]})},nx={src:"/_next/static/media/receiverimage.fb1a6fb2.svg"},nm={src:"/_next/static/media/senderimage.3e11cc04.svg"},nh=e=>{var t,n,i;let{paidBy:a,setPaidBy:r,zoneData:o}=e,s=(0,G.A)();return(0,l.jsxs)(m.jB,{spacing:1.2,gap:"5px",children:[(0,l.jsx)(m.jB,{children:(0,l.jsx)(X.JZ,{fontWeigh:"500",children:(0,Q.t)("Charge Paid By")})}),(0,l.jsxs)(m.jB,{direction:"row",sx:{gap:{xs:1},flexWrap:"wrap"},children:[(0,l.jsx)(j.A,{spacing:.5,sx:{cursor:"pointer"},onClick:()=>r("sender"),flexWrap:!0,children:(0,l.jsxs)(j.A,{backgroundColor:"sender"===a&&(0,eq.X4)(s.palette.primary.main,.1),sx:{borderRadius:"5px"},direction:"row",alignItems:"center",spacing:1,padding:"8px 30px",border:"1px solid",borderColor:"sender"===a?s.palette.primary.main:s.palette.neutral[400],children:[(0,l.jsx)(A.A,{src:nm.src,height:"30px",width:"30x",objectfit:"contain"}),(0,l.jsx)(p.A,{align:"center",children:(0,Q.t)("Sender")})]})}),(null==o||null==(i=o.data)||null==(n=i.zone_data)||null==(t=n[0])?void 0:t.cash_on_delivery)&&(0,l.jsx)(j.A,{spacing:.5,onClick:()=>r("receiver"),sx:{cursor:"pointer"},children:(0,l.jsxs)(j.A,{backgroundColor:"receiver"===a&&(0,eq.X4)(s.palette.primary.main,.1),sx:{borderRadius:"5px"},direction:"row",alignItems:"center",spacing:1,padding:"8px 20px",border:"1px solid",borderColor:"receiver"===a?s.palette.primary.main:s.palette.neutral[400],children:[(0,l.jsx)(A.A,{src:nx.src,height:"30px",width:"30px",objectfit:"contain"}),(0,l.jsx)(p.A,{align:"center",children:(0,Q.t)("Receiver")})]})})]})]})},ng=e=>{let{deliveryTip:t,setDeliveryTip:n,paidBy:i,setPaidBy:a,data:r,parcelDeliveryFree:o,zoneData:s,senderLocation:d,receiverLocation:c,configData:u,extraChargeLoading:x,setGuestUserEmail:h,emailError:g,guestUserEmail:v,handleEmailChange:f}=e;return(0,l.jsx)(m.WU,{children:(0,l.jsxs)(m.jB,{spacing:4,children:[(0,l.jsx)(j.A,{align:"center",children:(0,l.jsx)(p.A,{fontWeight:500,fontSize:"16px",children:(0,Q.t)("Billing")})}),(0,l.jsx)(np,{data:r,parcelDeliveryFree:o,senderLocation:d,receiverLocation:c,configData:u,extraChargeLoading:x}),(0,l.jsx)(e_,{parcel:"true",deliveryTip:t,setDeliveryTip:n}),(0,l.jsx)(nh,{paidBy:i,setPaidBy:a,zoneData:s})]})})},nj=async(e,t,n)=>{if(t){let{data:l}=await ei.A.get("".concat(eo.lI,"?origin_lat=").concat(null==e?void 0:e.lat,"&origin_lng=").concat(null==e?void 0:e.lng,"&destination_lat=").concat(t.lat?t.lat:null==t?void 0:t.latitude,"&destination_lng=").concat(t.lng?t.lng:null==t?void 0:t.longitude,"&mode=").concat(n||"WALK"));return l}},nv=async e=>{let{data:t}=await ei.A.post("".concat(eo.S),e);return t},nf=()=>(0,O.useMutation)("order-place",nv);var ny=n(9738),n_=n(24104),nA=n(36609);let nw=async()=>{let{data:e}=await ei.A.get(eo.Nh);return e},nC=()=>{var e,t,n,i,a,c,x;let g=(0,S.u)(),{configData:v}=(0,d.d4)(e=>e.configData),{parcelInfo:f}=(0,d.d4)(e=>e.parcelInfoData),{profileInfo:y}=(0,d.d4)(e=>e.profileInfo),{offlineInfoStep:_,offlinePaymentInfo:w}=(0,d.d4)(e=>e.offlinePayment),{parcelCategories:C}=(0,d.d4)(e=>e.parcelCategories),[b,I]=(0,s.useState)(void 0),[k,P]=(0,s.useState)(0),[W,z]=(0,s.useState)(null),[T,B]=(0,s.useState)(!1),[E,L]=(0,s.useState)("sender"),[F,R]=(0,s.useState)(""),Y=(0,d.wA)(),N=(0,r.useRouter)(),{method:H}=N.query,[q,V]=(0,s.useState)(!1),[X,J]=(0,s.useState)(!0),[$,K]=(0,s.useState)(null),[G,ee]=(0,s.useState)(!1),[ea,eo]=(0,s.useState)(null),[es,ed]=s.useState(null),ec={lat:null==f||null==(e=f.senderLocations)?void 0:e.lat,lng:null==f||null==(t=f.senderLocations)?void 0:t.lng},{data:ex}=(0,ny.A)(ec,X),{data:em,refetch:eh}=function(e,t,n){return(0,O.useQuery)(["distance",e,t],()=>nj(e,t,void 0),{enabled:!1,onError:U.P1})}(null==f?void 0:f.senderLocations,null==f?void 0:f.receiverLocations),{data:eg,mutate:ej}=eu(),ef=(0,M.g)(),ey=(0,M.W)(),e_=(0,t0.Wx)({initialValues:{password:"",confirm_password:""},validationSchema:tG.Ik({password:tG.Yj().required((0,Q.t)("Password is required")).min(8,(0,Q.t)("Password is too short - should be 8 chars minimum.")),confirm_password:tG.Yj().required((0,Q.t)("Confirm Password")).oneOf([tG.KR("password"),null],(0,Q.t)("Passwords must match"))})}),eA=(0,D.gf)(em,{latitude:null==f||null==(n=f.receiverLocations)?void 0:n.latitude,longitude:null==f||null==(i=f.receiverLocations)?void 0:i.longitude},b),{data:ew,refetch:eC,isLoading:eb}=tA();(0,s.useEffect)(()=>{eC()},[]);let{mutate:eS,isLoading:eI}=tg(),{data:ek,isLoading:eP,refetch:eW}=er({tempDistance:eA}),{data:ez,isLoading:eD,refetch:eT}=(0,O.useQuery)("parcel-category",nw,{enabled:!1,onError:U.P1});(0,s.useEffect)(()=>{em&&eW()},[em]),(0,s.useEffect)(()=>{eh()},[f]),(0,s.useEffect)(()=>{eT()},[]),(0,s.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("currentLatLng"));localStorage.getItem("location");let t=JSON.parse(localStorage.getItem("zoneid"));K(null==t?void 0:t[0]),I({...e,latitude:null==e?void 0:e.lat,longitude:null==e?void 0:e.lng,address:null==f?void 0:f.senderAddress,address_type:"Selected Address"})},[]);let eB=()=>{let e={...w,order_id:F,guest_id:(0,M.W)()};Y((0,Z.im)(3)),Y((0,Z.s0)(!0)),eS(e)},eE=JSON.parse(localStorage.getItem("zoneid"));(0,s.useEffect)(()=>{C&&eE&&ej({zone_id:null==eE?void 0:eE[0],module_id:null==C?void 0:C.module_id,date_time:new Date().toISOString(),guest_id:(0,M.W)()},{onError:U.Jm})},[C]),(0,s.useEffect)(()=>{q&&eB()},[F]);let eM=()=>{let e=(0,D.gf)(em,null==f?void 0:f.senderLocations,null==f?void 0:f.receiverLocations);if((null==C?void 0:C.parcel_per_km_shipping_charge)===0||(null==C?void 0:C.parcel_per_km_shipping_charge)>0){let t=e*(null==C?void 0:C.parcel_per_km_shipping_charge);return t>(null==C?void 0:C.parcel_minimum_shipping_charge)?(0,D.pE)(t+ek,eg):(0,D.pE)((null==C?void 0:C.parcel_minimum_shipping_charge)+ek,eg)}{let t=e*(null==v?void 0:v.parcel_per_km_shipping_charge);return t>(null==v?void 0:v.parcel_minimum_shipping_charge)?(0,D.pE)(t+ek,eg):(0,D.pE)((null==v?void 0:v.parcel_minimum_shipping_charge)+ek,eg)}},eL=JSON.stringify({id:null,address_type:"others",contact_person_number:"+".concat(null==f?void 0:f.receiverPhone),contact_person_email:null==f?void 0:f.receiverEmail,address:null==f?void 0:f.receiverAddress,additional_address:null,latitude:null==f||null==(a=f.receiverLocations)?void 0:a.lat,longitude:null==f||null==(c=f.receiverLocations)?void 0:c.lng,zone_id:null==ex||null==(x=ex.zone_data[0])?void 0:x.id,zone_ids:null,_method:null,contact_person_name:null==f?void 0:f.receiverName,road:null==f?void 0:f.road,house:null==f?void 0:f.house,floor:null==f?void 0:f.floor}),eF="cash_on_delivery"!==W&&"wallet"!==W&&"offline_payment"!==W&&null!==W?"digital_payment":W,eR={...b,cart:[],order_amount:eM()+Number(k),order_type:"parcel",payment_method:eF,distance:eA,discount_amount:0,tax_amount:0,receiver_details:eL,parcel_category_id:null==C?void 0:C.id,charge_payer:E,dm_tips:k,guest_id:(0,M.W)(),contact_person_name:null==f?void 0:f.senderName,contact_person_number:"+".concat(null==f?void 0:f.senderPhone),delivery_instruction:ea,sender_zone_id:$,contact_person_email:null==f?void 0:f.senderEmail,create_new_user:+!!es,password:e_.values.password,is_guest:+!ef,road:null==f?void 0:f.senderRoad,house:null==f?void 0:f.senderHouse,floor:null==f?void 0:f.senderFloor},{data:eO,isLoading:eY,mutate:eN}=nf(),{data:eH,mutate:eq}=tu();(0,s.useEffect)(()=>{eM()&&eq({...eR,order_amount:eM()},{onError:U.Jm})},[eM()]);let eV=()=>{"sender"===E?eN(eR,{onSuccess:e=>{if(e)if(ef?Y((0,Z.s0)(!0)):(Y((0,t8.ni)(null==e?void 0:e.order_id)),Y((0,t5.$$)(e)),Y((0,t5.s0)(!0))),"cash_on_delivery"!==W&&"offline_payment"!==W&&""!==W&&"wallet"!==W){var t;localStorage.setItem("totalAmount",null==e?void 0:e.total_ammount);let n=ef?"".concat(window.location.origin,"/profile?page=").concat("my-orders"):"".concat(window.location.origin,"/home"),l="".concat(ei.p,"/payment-mobile?order_id=").concat(null==e?void 0:e.order_id,"&customer_id=").concat((null!=(t=null==y?void 0:y.id)?t:null==e?void 0:e.user_id)?null==e?void 0:e.user_id:ey,"&payment_platform=").concat("web","&callback=").concat(n,"&payment_method=").concat(W);N.push(l,void 0,{shallow:!0})}else"wallet"===W?Number(null==y?void 0:y.wallet_balance)<Number(eM())?ev.Ay.error((0,Q.t)("Wallet balance is below total amount."),{id:"wallet",position:"bottom-right"}):(ev.Ay.success(null==e?void 0:e.message),o().push({pathname:"/profile",query:{orderId:null==e?void 0:e.order_id,page:"my-orders",from:"checkout"}},void 0,{shallow:!0})):"offline_payment"===W?(R(null==e?void 0:e.order_id),Y((0,t5.$$)(e)),V(!0),ev.Ay.success(null==e?void 0:e.message),ef?o().push({pathname:"/profile",query:{orderId:null==e?void 0:e.order_id,page:"my-orders",from:"checkout"}},void 0,{shallow:!0}):o().push({pathname:"/home",query:{order_id:null==e?void 0:e.order_id}},void 0,{shallow:!0})):(ev.Ay.success(null==e?void 0:e.message),(0,M.g)()?o().push({pathname:"/profile",query:{orderId:null==e?void 0:e.order_id,page:"my-orders",from:"checkout"}},void 0,{shallow:!0}):o().push({pathname:"/home",query:{order_id:null==e?void 0:e.order_id}},void 0,{shallow:!0}),R(null==e?void 0:e.order_id))},onError:e=>{var t,n,l;null==e||null==(l=e.response)||null==(n=l.data)||null==(t=n.errors)||t.forEach(e=>ev.Ay.error(e.message,{position:"bottom-right"}))}}):(Y((0,t5.s0)(!0)),"cash_on_delivery"===W?eN(eR,{onSuccess:e=>{if(e)if("digital_payment"===W){localStorage.setItem("totalAmount",null==e?void 0:e.total_ammount);let t=ei.p.substring(0,31),n="".concat(window.location.origin,"/order?order_id=").concat(null==e?void 0:e.order_id,"&total=").concat(null==e?void 0:e.total_ammount),l="".concat(t,"/payment-mobile?order_id=").concat(null==e?void 0:e.order_id,"&customer_id=").concat(null==y?void 0:y.id,"&callback=").concat(n);N.push(l,void 0,{shallow:!0})}else"wallet"===W?Number(null==y?void 0:y.wallet_balance)<Number(eM())?ev.Ay.error((0,Q.t)("Wallet balance is below total amount."),{id:"wallet",position:"bottom-right"}):(ev.Ay.success(null==e?void 0:e.message),(0,M.g)()?o().push({pathname:"/profile",query:{orderId:null==e?void 0:e.order_id,page:"my-orders",from:"checkout"}},void 0,{shallow:!0}):o().push({pathname:"/home",query:{order_id:null==e?void 0:e.order_id}},void 0,{shallow:!0})):(ev.Ay.success(null==e?void 0:e.message),(0,M.g)()?o().push({pathname:"/profile",query:{orderId:null==e?void 0:e.order_id,page:"my-orders",from:"checkout"}},void 0,{shallow:!0}):o().push({pathname:"/home",query:{order_id:null==e?void 0:e.order_id}},void 0,{shallow:!0}),R(null==e?void 0:e.order_id))},onError:e=>{var t,n,l;null==e||null==(l=e.response)||null==(n=l.data)||null==(t=n.errors)||t.forEach(e=>ev.Ay.error(e.message,{position:"bottom-right"}))}}):ev.Ay.error((0,Q.t)("Without any payment method, you can not place the order.")))};(null==y?void 0:y.is_valid_for_discount)?(eM(),(null==v?void 0:v.additional_charge)&&(null==v||v.additional_charge),(0,el.mY)(eM(),null==y?void 0:y.discount_amount,null==y?void 0:y.discount_amount_type)):(eM(),(null==v?void 0:v.additional_charge)&&(null==v||v.additional_charge));let eZ=(0,Q.t)("This charge includes extra vehicle charge"),eX="".concat(eZ," ").concat((0,el.Yi)(ek)).concat((null==eg?void 0:eg.customer_note_status)!==0?" ".concat(null==eg?void 0:eg.customer_note," ").concat((null==eg?void 0:eg.type)==="amount"?(0,el.Yi)(null==eg?void 0:eg.price):"".concat(null==eg?void 0:eg.price,"%")):"");return(0,l.jsx)(l.Fragment,{children:"offline"===H?(0,l.jsx)(m.jB,{paddingBottom:{sm:"20px",md:"80px"},pt:"1.5rem",alignItems:"center",children:(0,l.jsx)(m.WU,{sx:{width:{xs:"100%",sm:"90%",md:"80%"}},children:(0,l.jsx)(t4,{offlinePaymentOptions:ew,total_order_amount:eM()+parseFloat(k)+(null==v?void 0:v.additional_charge),placeOrder:eV,offlinePaymentLoading:eI||eY})})}):(0,l.jsxs)(m.jB,{paddingBottom:{sm:"20px",md:"80px"},pt:"1.5rem",children:[(0,l.jsx)(j.A,{paddingBottom:"20px",children:(0,l.jsx)(nn.A,{text:"Checkout",textAlign:"left"})}),(0,l.jsx)(m.jB,{children:(0,l.jsxs)(u.Ay,{container:!0,spacing:4,children:[(0,l.jsx)(u.Ay,{item:!0,xs:12,sm:12,md:4,children:(0,l.jsx)(nd,{configData:v,parcelInfo:f,parcelCategories:C,deliveryInstruction:ez,customerInstruction:ea,setCustomerInstruction:eo,check:es,setCheck:ed,formik:e_,passwordHandler:e=>{e_.setFieldValue("password",e)},confirmPasswordHandler:e=>{e_.setFieldValue("confirm_password",e)}})}),(0,l.jsx)(u.Ay,{item:!0,xs:12,sm:12,md:4,children:(0,l.jsx)(ng,{deliveryTip:k,setDeliveryTip:P,paidBy:E,setPaidBy:L,data:em,parcelDeliveryFree:eM,zoneData:{data:ex},senderLocation:null==f?void 0:f.senderLocations,receiverLocation:null==f?void 0:f.receiverLocations,configData:v,extraChargeLoading:eP})}),(0,l.jsx)(u.Ay,{item:!0,xs:12,sm:12,md:4,children:$&&ex&&(0,l.jsxs)(m.WU,{padding:"20px",children:[(0,l.jsx)(h.Zs,{parcel:"true",children:(0,Q.t)("Order Summary")}),(0,l.jsxs)(m.jB,{spacing:1,paddingY:"10px",children:[(0,l.jsxs)(j.A,{direction:"row",justifyContent:"space-between",children:[(0,l.jsxs)(p.A,{fontWeight:"500",children:[(0,Q.t)("Delivery Fee"),ek>0||(null==eg?void 0:eg.price)>0?(0,l.jsx)(et.A,{title:eX,placement:"top",arrow:!0,children:(0,l.jsx)(ep.A,{sx:{fontSize:"11px"}})}):null]}),(0,l.jsx)(p.A,{fontWeight:"500",children:(0,el.Yi)(eM())})]}),(0,l.jsxs)(j.A,{direction:"row",justifyContent:"space-between",children:[(0,l.jsx)(p.A,{fontWeight:"500",children:(0,Q.t)("Delivery Man Tips")}),(0,l.jsx)(p.A,{fontWeight:"500",children:(0,el.Yi)(k)})]}),(null==eH?void 0:eH.tax_included)!==null&&(null==eH?void 0:eH.tax_included)===0?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(j.A,{direction:"row",justifyContent:"space-between",children:[(0,l.jsx)(p.A,{fontWeight:"500",children:(0,Q.t)("VAT/TAX")}),(0,l.jsxs)(p.A,{fontWeight:"500",children:[(null==eH?void 0:eH.tax_included)===0&&(0,l.jsx)(l.Fragment,{children:"(+)"}),(0,el.Yi)(null==eH?void 0:eH.tax_amount)]})]})}):null,(null==v?void 0:v.additional_charge_status)===1&&(0,l.jsxs)(j.A,{direction:"row",justifyContent:"space-between",children:[(0,l.jsx)(p.A,{fontWeight:"500",children:null==v?void 0:v.additional_charge_name}),(0,l.jsx)(p.A,{fontWeight:"500",children:(0,el.Yi)(null==v?void 0:v.additional_charge)})]}),(0,l.jsx)(en.A,{border:"1px"}),(0,l.jsxs)(j.A,{direction:"row",justifyContent:"space-between",children:[(0,l.jsxs)(p.A,{fontWeight:"500",color:"primary",component:"span",children:[(0,Q.t)("Total"),(null==eH?void 0:eH.tax_included)===1&&(null==eH?void 0:eH.tax_included)!==null&&(0,l.jsx)(p.A,{fontSize:"12px",sx:{marginInlineStart:"5px"},color:"primary",component:"span",children:"(Vat/Tax incl.)"})]}),(0,l.jsx)(p.A,{fontWeight:"500",color:"primary",children:(0,el.Yi)(eM()+Number(k)+(null==eH?void 0:eH.tax_amount)+((null==v?void 0:v.additional_charge)?null==v?void 0:v.additional_charge:0))})]})]}),(0,l.jsx)(ti,{setPaymentMethod:z,paymentMethod:W,paidBy:E,isLoading:eY,orderPlace:eV,zoneData:{data:ex},configData:v,storeZoneId:$,parcel:"true",offlinePaymentOptions:ew,getParcelPayment:()=>(null==ex?void 0:ex.zone_data)?ex.zone_data.filter(e=>{var t;return null==e||null==(t=e.modules)?void 0:t.find(e=>(null==e?void 0:e.module_type)==="parcel")}):[]})]})})]})}),G&&(0,l.jsx)(eJ.A,{openModal:G,handleClose:()=>ee(!1),children:(0,l.jsx)(m.WU,{children:(0,l.jsxs)(m.jB,{justifyContent:"center",spacing:2,alignItem:"center",children:[(0,l.jsx)(A.A,{src:nt.src}),(0,l.jsx)(p.A,{textAlign:"center",color:g.palette.primary.main,fontSize:"20px",fontWeight:"700",children:(0,Q.t)("Congratulations!")}),(0,l.jsx)(p.A,{textAlign:"center",maxWidth:"400px",color:g.palette.neutral[400],children:(0,Q.t)("Your parcel request submitted successfully! to check your parcel status please track order.")}),(0,l.jsx)(n_.jn,{onClick:()=>{B(!0)},children:(0,Q.t)("Track Order")})]})})}),T&&(0,l.jsx)(nA.A,{orderId:F,sideDrawerOpen:T,setSideDrawerOpen:B})]})})};var nb=n(54500),nS=n(67512),nI=n(9505),nk=n(5513);n(36880);var nP=n(52722),nW=n(61482),nz=n(73302);n(57277);let nD=()=>{(0,nP.A)();let e=(0,d.wA)(),{landingPageData:t,configData:n}=(0,d.d4)(e=>e.configData),o=(0,r.useRouter)(),{page:c,store_id:u,id:p}=o.query,{cartList:x,campaignItemList:m,buyNowItemList:h,totalAmount:g}=(0,d.d4)(e=>e.cart),j=(0,a.X)(x),{data:v,refetch:f}=(0,nz.G)();return(0,s.useEffect)(()=>{n||f()},[n]),(0,s.useEffect)(()=>{v&&e((0,nW.ff)(v))},[v]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Ay,{}),(0,l.jsx)(nk.A,{configData:n,title:n?"Checkout":"Loading...",image:"".concat((0,D.VG)({value:null==n?void 0:n.logo_storage},"business_logo_url",n),"/").concat(null==n?void 0:n.fav_icon),businessName:null==n?void 0:n.business_name}),(0,l.jsx)(nS.A,{configData:n,landingPageData:t,children:(0,l.jsx)(nb.A,{children:(0,l.jsxs)(nI.A,{from:"checkout",children:["parcel"===c&&(0,l.jsx)(nC,{configData:n}),"prescription"===c&&(0,l.jsx)(tp,{storeId:u,configData:n,page:c}),"campaign"===c&&m.length>0&&(0,l.jsx)(ne,{router:o,configData:n,page:c,cartList:j,campaignItemList:m,totalAmount:g}),"cart"===c&&(0,l.jsx)(ne,{router:o,configData:n,page:c,cartList:j,campaignItemList:m,totalAmount:g}),"buy_now"===c&&h.length>0&&(0,l.jsx)(ne,{router:o,configData:n,page:c,cartList:h,campaignItemList:m,totalAmount:g}),(0,l.jsx)(tx,{page:c,cartList:x,campaignItemList:m,buyNowItemList:h})]})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[411,9759,3716,4913,2236,3890,1335,6585,746,428,2693,2086,3490,417,6880,1303,636,6593,8792],()=>t(4929)),_N_E=e.O()}]);